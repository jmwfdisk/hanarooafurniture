<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ÌïòÎÇòÎ°úÏò§ÏóêÏù¥ÌçºÎãàÏ≤ò - ÏûÑÏßÅÏõê Í≤åÏãúÌåê">
    <meta name="keywords" content="ÌïòÎÇòÎ°úÏò§ÏóêÏù¥ÌçºÎãàÏ≤ò, ÏûÑÏßÅÏõê, Í≤åÏãúÌåê">
    <title>ÌïòÎÇòÎ°úÏò§ÏóêÏù¥ÌçºÎãàÏ≤ò ÏûÑÏßÅÏõê</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- Í≥µÌÜµ Ïù∏Ï¶ù CSS -->
    <link rel="stylesheet" href="../css/auth.css">
    <!-- Í≥µÌÜµ ÎîîÏûêÏù∏ ÏãúÏä§ÌÖú CSS -->
    <link rel="stylesheet" href="../css/common.css">
    
    <style>
        /* Î™®Îì† Î≤ÑÌäºÏóê ÏÜêÍ∞ÄÎùΩ Ïª§ÏÑú Ï†ÅÏö© */
        button {
            cursor: pointer;
        }

        button:disabled {
            cursor: not-allowed;
        }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f5f5f7;
            color: #000000;
            width: 100%;
            box-sizing: border-box;
        }

        .navbar {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 5px 5px;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            position: relative;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            z-index: 1000;
            height: 80px;
            transition: all 0.3s ease;
            width: 100%;
            box-sizing: border-box;
        }

        .navbar > .logo {
            margin-right: auto;
        }
        
        .navbar .logo a {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: #000;
        }
        
        .navbar .logo img {
            height: 50px;
            overflow: visible;
        }
        
        .navbar .logo a {
            display: block;
            text-decoration: none;
            transition: opacity 0.3s ease;
        }
        
        .navbar .logo a:hover {
            opacity: 0.8;
        }

        .navbar .logo span {
            font-size: 18px;
            font-weight: bold;
            white-space: nowrap;
        }

        .navbar > div {
            position: relative;
        }

        .navbar > div > a {
            margin: 13px 4px !important;
            font-size: 18px !important;
            font-weight: 600;
            letter-spacing: -0.5px;
            text-decoration: none;
            color: #212529;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            white-space: nowrap;
            position: relative;
            padding: 8px 12px;
            border-radius: 8px;
        }

        .navbar > div > a:hover {
            color: #44aa6b;
            background: rgba(68, 170, 107, 0.08);
        }

        .secondary-navbar {
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 8px rgba(68, 170, 107, 0.3);
            position: relative;
            width: 100%;
            box-sizing: border-box;
        }

        /* Î™®Î∞îÏùº ÎèÑÍµ¨ ÏïÑÏù¥ÏΩò - Í∏∞Î≥∏Ï†ÅÏúºÎ°ú Ïà®ÍπÄ */
        .mobile-tool-icons {
            display: none;
            position: fixed;
            right: 10px;
            top: 130px;
            flex-direction: column;
            gap: 8px;
            z-index: 100;
        }

        .mobile-tool-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: none;
            font-size: 22px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mobile-tool-btn:first-child {
            background: linear-gradient(135deg, #64c8ff 0%, #4a9fd4 100%);
        }

        .mobile-tool-btn:last-child {
            background: linear-gradient(135deg, #ff96c8 0%, #e080a8 100%);
        }

        .mobile-tool-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .mobile-tool-btn:active {
            transform: scale(0.95);
        }

        .secondary-navbar a {
            margin: 0;
            padding: 16px 24px;
            font-size: 15px;
            font-weight: 600;
            text-decoration: none;
            color: #fff;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            position: relative;
        }

        .secondary-navbar a:hover {
            background: rgba(255, 255, 255, 0.1);
            border-bottom-color: rgba(255, 255, 255, 0.5);
        }

        .secondary-navbar a.active {
            background: rgba(255, 255, 255, 0.15);
            border-bottom-color: #fff;
            font-weight: 700;
        }

        .login-container {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 32px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 1001;
            min-width: 360px;
            max-width: 420px;
            max-height: 90vh;
            animation: scaleIn 0.3s ease;
            overflow-y: auto;
            animation: modalFadeIn 0.2s ease-out;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translate(-50%, -48%) scale(0.98); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 24px;
            border-radius: 12px;
            background: #e9ecef;
            padding: 4px;
        }

        .auth-tab {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            color: #6c757d;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .auth-tab.active {
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(68, 170, 107, 0.3);
        }

        .auth-tab:hover:not(.active) {
            color: #44aa6b;
        }

        .auth-form {
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        .login-container h2 {
            margin: 0 0 24px 0;
            font-size: 24px;
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .login-container input {
            margin: 8px 0;
            padding: 12px 16px;
            width: calc(100% - 32px);
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 14px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: #fff;
        }

        .login-container input:focus {
            outline: none;
            border-color: #44aa6b;
            box-shadow: 0 0 0 4px rgba(68, 170, 107, 0.1);
            transform: translateY(-1px);
        }

        .login-container button:not(.auth-tab) {
            padding: 12px 24px;
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 15px;
            margin-top: 16px;
            width: 100%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(68, 170, 107, 0.3);
            position: relative;
            overflow: hidden;
        }

        .login-container button:not(.auth-tab)::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .login-container button:not(.auth-tab):hover::before {
            width: 300px;
            height: 300px;
        }

        .login-container button:not(.auth-tab):hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(68, 170, 107, 0.4);
        }

        .auth-notice {
            margin-top: 16px;
            font-size: 12px;
            color: #6c757d;
            line-height: 1.5;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
        }

        .footer-top {
            display: flex;
            justify-content: flex-end;
            align-items: flex-end;
            background-color: #ffffff;
            padding: 5px;
            font-size: 12px;
            gap: 10px;
        }

        .footer-top button:disabled {
            background-color: #ccc;
            color: #666;
            cursor: not-allowed;
        }

        .footer-top button {
            background-color: #ffffff;
            color: #7a7878;
            border: none;
            cursor: pointer;
            font-size: 12px;
            padding: 5px 5px;
            border-radius: 4px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .footer-top button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
        }

        .partner-logos {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            padding: 30px 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .partner-logos a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            min-width: 40px;
            background: #ffffff;
            border-radius: 12px;
            padding: 6px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .partner-logos a::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0, 113, 227, 0.05) 0%, rgba(0, 91, 181, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .partner-logos a:hover {
            transform: translateY(-2px) scale(1.1);
            box-shadow: 0 4px 16px rgba(0, 113, 227, 0.2);
        }
        
        .partner-logos a:hover::before {
            opacity: 1;
        }

        .partner-logos img {
            width: 100%;
            height: 100%;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 6px;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }
        
        .partner-logos a:hover img {
            transform: scale(1.2);
        }

        .board-section {
            max-width: 1000px;
            width: 100%;
            margin: 40px auto;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.08), 0 2px 8px rgba(0,0,0,0.04);
            padding: 40px 50px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            border: 1px solid rgba(0,0,0,0.05);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: fadeIn 0.8s ease;
            position: relative;
            overflow: hidden;
            box-sizing: border-box;
        }
        
        /* ÌöåÏõêÍ¥ÄÎ¶¨ ÏÑπÏÖòÏùÄ Í≥µÏßÄÏÇ¨Ìï≠ Í≤åÏãúÌåêÍ≥º ÎèôÏùºÌïú Î†àÏù¥ÏïÑÏõÉ */
        #member-section {
            max-width: 1000px;
            width: 100%;
            padding: 40px 50px 40px 50px;
            padding-right: 30px;
        }
        
        .board-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(68, 170, 107, 0.05), transparent);
            transition: left 0.5s ease;
        }
        
        .board-section:hover::before {
            left: 100%;
        }
        
        .board-section:hover {
            box-shadow: 0 16px 48px rgba(0,0,0,0.15), 0 8px 16px rgba(0,0,0,0.08);
            transform: translateY(-4px);
        }

.board-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
}

        #member-section .board-header {
            padding-left: 20px;
        }

.board-header h2 {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0;
            letter-spacing: -0.5px;
            animation: slideUp 0.6s ease;
}

        .board-table {
            border-top: 2px solid #e9ecef;
            border-bottom: 1px solid #e9ecef;
            padding: 25px 0;
            background: #fff;
            border-radius: 12px;
            margin: 20px auto 0;
            width: 800px;
            max-width: 100%;
        }

        .table-header {
            display: grid;
            grid-template-columns: 50px 350px 100px 100px;
            width: 750px;
            min-width: 750px;
            font-weight: 700;
            border-bottom: 2px solid #e9ecef;
            padding: 15px 20px;
            margin: 0 auto 10px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 8px 8px 0 0;
            color: #495057;
            font-size: 14px;
            letter-spacing: 0.3px;
            gap: 10px;
        }

        .table-header span {
            text-align: center;
        }

        .table-header span:first-child {
            text-align: center;
        }

        .table-header span:nth-child(2) {
            text-align: center;
        }

        .table-body {
            min-height: 200px;
            width: 750px;
            min-width: 750px;
            margin: 0 auto;
        }

        .table-empty {
            text-align: center;
            padding: 60px 20px;
            font-weight: 500;
            color: #6c757d;
            font-size: 16px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 12px;
            margin: 20px auto;
            border: 2px dashed #dee2e6;
            position: relative;
            width: 100%;
            max-width: 700px;
            box-sizing: border-box;
        }

        .table-empty::before {
            content: "üìã";
            font-size: 48px;
            display: block;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .table-row {
            position: absolute;
            left: 130px;
            display: grid;
            grid-template-columns: 50px 350px 100px 100px;
            width: 750px;
            min-width: 750px;
            font-size: 14px;
            padding: 16px 20px;
            align-items: center;
            border-bottom: 1px solid #f1f3f5;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 8px;
            margin: 4px auto;
            animation: fadeIn 0.4s ease;
            gap: 10px;
        }

        .table-row:hover {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        /* Í∏∞Î≥∏ Ìñâ Ïä§ÌÉÄÏùº: Ìñâ ÎÜíÏù¥ Í≥†Ï†ï, Ï§ÑÎ∞îÍøà Î∞©ÏßÄ, ÎßêÏ§ÑÏûÑÌëú */
        .table-row span {
            height: 23px;
            line-height: 23px;
            padding: 0 8px;
            box-sizing: border-box;
            position: static;
            margin-right: 0px;
            color: #495057;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* 1. Î≤àÌò∏: Í∞ÄÏö¥Îç∞ Ï†ïÎ†¨, Í≥†Ï†ï Ìè≠ */
        .table-row span:first-child {
            text-align: center;
            width: 60px;
            min-width: 60px;
            max-width: 60px;
        }

        /* 2. Ï†úÎ™©: ÏôºÏ™Ω Ï†ïÎ†¨, Í≥†Ï†ï Ìè≠, ÎßêÏ§ÑÏûÑÌëú (Í∞ÄÏû• Í∏¥ ÌÖçÏä§Ìä∏) */
        .table-row span:nth-child(2) {
            text-align: left !important;
            width: 400px;
            min-width: 400px;
            max-width: 400px;
        }

        .table-row span:nth-child(2) a {
            display: inline-block;
            text-align: left;
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* 3. ÏûëÏÑ±Ïûê: Í∞ÄÏö¥Îç∞ Ï†ïÎ†¨, Í≥†Ï†ï Ìè≠ */
        .table-row span:nth-child(3) {
            text-align: center;
            width: 120px;
            min-width: 120px;
            max-width: 120px;
        }

        /* 4. ÎÇ†Ïßú: Í∞ÄÏö¥Îç∞ Ï†ïÎ†¨, Í≥†Ï†ï Ìè≠ */
        .table-row span:nth-child(4) {
            text-align: center;
            width: 120px;
            min-width: 120px;
            max-width: 120px;
        }

        .table-row button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 4px 8px;
  cursor: pointer;
            font-size: 11px;
            font-weight: 600;
            transition: all 0.2s ease;
            box-shadow: 0 1px 3px rgba(255, 107, 107, 0.3);
            min-width: 45px;
            height: 24px;
            line-height: 1;
        }

        .table-row button:hover {
            background: linear-gradient(135deg, #ee5a6f 0%, #dc4a5f 100%);
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(255, 107, 107, 0.4);
        }

        .table-row button:active {
            transform: translateY(0);
        }

        .table-row a {
            text-decoration: none;
  color: #44aa6b;
            font-weight: 500;
            transition: all 0.2s ease;
            display: inline-block;
        }

        .table-row a:hover {
            color: #3a8f5a;
            text-decoration: underline;
            transform: translateX(2px);
        }

        /* ÌöåÏõêÍ¥ÄÎ¶¨ ÌÖåÏù¥Î∏î Ï†ÑÏö© Ïä§ÌÉÄÏùº - Ïó¥ Ï†ïÎ†¨ Í∑úÏπô Í≥†Ï†ï */
        /* #member-section Î∞ïÏä§ ÌÅ¨Í∏∞Îäî ÏúÑÏóêÏÑú Í≥µÏßÄÏÇ¨Ìï≠Í≥º ÎèôÏùºÌïòÍ≤å ÏÑ§Ï†ïÎê® */
        #member-section {
            overflow-x: auto;
        }
        
        #member-section .board-table {
            width: 730px;
            max-width: 100%;
            margin: 0 auto;
        }
        
        /* ÌÖåÏù¥Î∏î Ïó¥ ÎÑàÎπÑ Í≥†Ï†ï: ÏïÑÏù¥Îîî(120) Ïù¥Î¶Ñ(100) Ïù¥Î©îÏùº(200) ÌöåÏõêÏú†Ìòï(100) Ïã†Ï≤≠Ïùº(120) ÏäπÏù∏Ïó¨Î∂Ä(150) Í¥ÄÎ¶¨(80) */
        #member-section .table-header {
            grid-template-columns: 90px 75px 170px 85px 95px 120px 65px;
            width: 700px;
            min-width: 700px;
            gap: 6px;
            padding: 15px 15px;
            letter-spacing: 0;
            margin: 0 auto;
            justify-items: center;
        }

        #member-section .table-row {
            position: static;
            left: auto;
            grid-template-columns: 90px 75px 170px 85px 95px 120px 65px;
            width: 700px;
            min-width: 700px;
            gap: 6px;
            padding: 16px 15px;
            margin: 0 auto;
            justify-items: center;
        }

        #member-section .table-row:hover {
            background: transparent;
            transform: none;
            box-shadow: none;
        }

        /* Ìó§Îçî Í∏∞Î≥∏ Ïä§ÌÉÄÏùº - Ï§ëÏïô Ï†ïÎ†¨ */
        #member-section .table-header span {
            padding: 0 !important;
            box-sizing: border-box;
            text-align: center !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        /* Í∏∞Î≥∏ Ìñâ Ïä§ÌÉÄÏùº: Ìñâ ÎÜíÏù¥ Í≥†Ï†ï, Ï§ÑÎ∞îÍøà Î∞©ÏßÄ, Ï§ëÏïô Ï†ïÎ†¨ */
        #member-section .table-row span {
            height: 23px;
            line-height: 23px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding: 0 !important;
            margin: 0 !important;
            box-sizing: border-box;
            text-align: center !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            position: static !important;
            color: #495057;
        }

        /* 1. ÏïÑÏù¥Îîî: Ï§ëÏïô Ï†ïÎ†¨, Í≥†Ï†ï Ìè≠, ÎßêÏ§ÑÏûÑÌëú */
        #member-section .table-row span:nth-child(1) {
            text-align: center !important;
            width: 90px;
            min-width: 90px;
            max-width: 90px;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        /* 2. Ïù¥Î¶Ñ: Ï§ëÏïô Ï†ïÎ†¨, Í≥†Ï†ï Ìè≠ */
        #member-section .table-row span:nth-child(2) {
            text-align: center !important;
            width: 75px;
            min-width: 75px;
            max-width: 75px;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        /* 3. Ïù¥Î©îÏùº: Ï§ëÏïô Ï†ïÎ†¨, Í≥†Ï†ï Ìè≠, ÎßêÏ§ÑÏûÑÌëú */
        #member-section .table-row span:nth-child(3) {
            text-align: center !important;
            width: 170px;
            min-width: 170px;
            max-width: 170px;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        /* 4. ÌöåÏõêÏú†Ìòï: Ï§ëÏïô Ï†ïÎ†¨, Í≥†Ï†ï Ìè≠ */
        #member-section .table-row span:nth-child(4) {
            text-align: center !important;
            width: 85px;
            min-width: 85px;
            max-width: 85px;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        /* 5. Ïã†Ï≤≠Ïùº: Ï§ëÏïô Ï†ïÎ†¨, Í≥†Ï†ï Ìè≠ */
        #member-section .table-row span:nth-child(5) {
            text-align: center !important;
            width: 95px;
            min-width: 95px;
            max-width: 95px;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        /* 6. ÏäπÏù∏Ïó¨Î∂Ä: Ï§ëÏïô Ï†ïÎ†¨, Í≥†Ï†ï Ìè≠, flex (Î≤ÑÌäºÎßå ÌëúÏãú) */
        #member-section .table-row span:nth-child(6) {
            text-align: center !important;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3px;
            width: 120px;
            min-width: 120px;
            max-width: 120px;
            padding: 0;
        }

        /* 7. Í¥ÄÎ¶¨: Ï§ëÏïô Ï†ïÎ†¨, Í≥†Ï†ï Ìè≠, flex */
        #member-section .table-row span:nth-child(7) {
            text-align: center !important;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3px;
            width: 65px;
            min-width: 65px;
            max-width: 65px;
            padding: 0;
        }
        
        #member-tbody {
            width: 700px;
            min-width: 700px;
            margin: 0 auto;
        }

        /* ÏäπÏù∏Ïó¨Î∂Ä Ïª¨Îüº ÎÇ¥ Î≤ÑÌäºÏùÄ flexÎ°ú ÎÇòÎûÄÌûà ÌëúÏãú (Ïò§Î≤ÑÎ†àÏù¥ Ïä§ÌÉÄÏùº Ï†úÍ±∞) */
        #member-section .table-row span:nth-child(8) .approve-btn,
        #member-section .table-row span:nth-child(8) .reject-btn {
            position: relative;
            transform: none;
            margin: 0;
        }

        .board-notice {
  font-size: 14px;
            color: #6c757d;
            margin-top: 30px;
            line-height: 1.8;
            padding: 20px 24px;
            background: linear-gradient(135deg, #e7f5ff 0%, #f0f9ff 100%);
            border-radius: 12px;
            border-left: 4px solid #44aa6b;
            box-shadow: 0 2px 8px rgba(68, 170, 107, 0.1);
            transition: all 0.3s ease;
        }

        .board-notice:hover {
            box-shadow: 0 4px 12px rgba(68, 170, 107, 0.15);
            transform: translateX(4px);
}

.pagination {
  text-align: center;
            margin: 30px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            flex-wrap: nowrap;
        }

        .pagination-dot {
            margin: 0 3px;
            cursor: pointer;
            font-size: 12px;
            color: #adb5bd;
            outline: none;
            transition: all 0.2s ease;
            padding: 0;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            vertical-align: middle;
            text-align: center;
        }

        .pagination-dot:hover {
            background-color: #e9ecef;
            color: #495057;
            transform: scale(1.03);
        }

        .pagination-dot.active {
            color: white;
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            box-shadow: 0 1px 4px rgba(68, 170, 107, 0.3);
            transform: scale(1.05);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
        }

        .pagination button {
            margin: 0 5px;
            padding: 8px 16px;
            border: 2px solid #e9ecef;
            background: #fff;
            border-radius: 8px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #495057;
            transition: all 0.2s ease;
        }

        .pagination button:hover:not(:disabled) {
            border-color: #44aa6b;
            color: #44aa6b;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(68, 170, 107, 0.2);
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
}

.board-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e9ecef;
            flex-wrap: wrap;
            gap: 16px;
}

.search-group {
  display: flex;
  gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-group select {
            padding: 10px 14px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            background: #fff;
    font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-group select:focus {
            outline: none;
            border-color: #44aa6b;
            box-shadow: 0 0 0 4px rgba(68, 170, 107, 0.1);
}

.search-group input {
            padding: 10px 16px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            width: 250px;
    font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-group input:focus {
            outline: none;
            border-color: #44aa6b;
            box-shadow: 0 0 0 4px rgba(68, 170, 107, 0.1);
}

.search-group button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            color: #fff;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(68, 170, 107, 0.3);
            position: relative;
            overflow: hidden;
        }

        .search-group button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .search-group button:hover::before {
            width: 300px;
            height: 300px;
        }

        .search-group button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(68, 170, 107, 0.4);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
}

.action-buttons button {
            padding: 10px 20px;
            border: 2px solid #e9ecef;
            background: #fff;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #495057;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .action-buttons button:hover {
            border-color: #44aa6b;
            color: #44aa6b;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(68, 170, 107, 0.2);
        }

.action-buttons .write {
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            color: #fff;
            border: none;
            box-shadow: 0 4px 12px rgba(68, 170, 107, 0.3);
            position: relative;
            overflow: hidden;
        }

        .action-buttons .write::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .action-buttons .write:hover::before {
            width: 300px;
            height: 300px;
        }

        .action-buttons .write:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(68, 170, 107, 0.4);
            color: #fff;
        }


        .write-form {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 800px;
            width: 90%;
            padding: 32px;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            z-index: 1001;
            animation: modalFadeIn 0.2s ease-out;
            max-height: 85vh;
            overflow-y: auto;
        }
        
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -48%) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .write-form h2 {
            margin: 0 0 24px 0;
            font-size: 24px;
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .write-form input,
        .write-form textarea {
            width: calc(100% - 32px);
            padding: 14px 16px;
            margin-bottom: 16px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 15px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .write-form input:focus,
        .write-form textarea:focus {
            outline: none;
            border-color: #44aa6b;
            box-shadow: 0 0 0 4px rgba(68, 170, 107, 0.1);
        }

        .write-form textarea {
            min-height: 200px;
            resize: vertical;
        }

        .write-form button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            color: #fff;
            position: relative;
            overflow: hidden;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            margin-right: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(68, 170, 107, 0.3);
        }

        .write-form button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .write-form button:hover::before {
            width: 300px;
            height: 300px;
        }

        .write-form button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(68, 170, 107, 0.4);
        }

        .write-form .cancel-btn {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            color: #495057;
            border: 2px solid #e9ecef;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .write-form .cancel-btn:hover {
            border-color: #dee2e6;
            transform: translateY(-2px);
        }

        .post-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            z-index: 1001;
            max-width: 700px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            animation: modalFadeIn 0.2s ease-out;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -48%) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .post-modal h3 {
            margin: 0 0 20px 0;
            font-size: 24px;
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .post-modal .post-meta {
            padding: 12px 16px;
            background: linear-gradient(135deg, #e7f5ff 0%, #f0f9ff 100%);
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #44aa6b;
    font-size: 14px;
            color: #495057;
        }

        .post-modal .post-content {
            white-space: pre-wrap;
            line-height: 1.8;
            font-size: 15px;
            color: #495057;
            background: #fff;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #e9ecef;
            margin-bottom: 20px;
        }

        .post-modal .close-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            font-size: 24px;
            color: #6c757d;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .post-modal .close-btn:hover {
            background: #f1f3f5;
            color: #495057;
            transform: rotate(90deg);
        }

        .post-modal-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }

        .post-delete-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .post-delete-btn:hover {
            background: linear-gradient(135deg, #ee5a6f 0%, #dc4a5f 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);
        }

        .post-delete-btn:active {
            transform: translateY(0);
        }

        .login {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-direction: row;
        }

        /* Ïà®Í≤®ÏßÑ Î°úÍ∑∏Ïù∏/Î°úÍ∑∏ÏïÑÏõÉ Î≤ÑÌäºÏù¥ Í≥µÍ∞ÑÏùÑ Ï∞®ÏßÄÌïòÏßÄ ÏïäÎèÑÎ°ù */
        .login-item[style*="display: none"],
        #login-link[style*="display: none"],
        #logout-link[style*="display: none"] {
            display: none !important;
            width: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
            overflow: hidden !important;
        }

        .employee-btn {
            display: flex;
            align-items: center;
        }
        
        .employee-btn button {
            padding: 6px 12px;
            font-size: 13px;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .employee-btn button:not(:disabled) {
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(68, 170, 107, 0.3);
        }

        .employee-btn button:not(:disabled):hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(68, 170, 107, 0.4);
        }

        .employee-btn button:disabled {
            background-color: #e9ecef;
            color: #adb5bd;
            cursor: not-allowed;
        }

        /* Î°úÍ∑∏Ïù∏ ÏïÑÏù¥ÏΩò Ïä§ÌÉÄÏùº */
        .login-icon {
            height: 20px;
            width: auto;
            margin-right: 5px;
            vertical-align: middle;
        }

        footer {
            background-color: #ccc8c8;
            color: #696868;
            padding: 20px;
            margin-top: 40px;
            text-align: center;
            padding-bottom: 15px;
        }

        footer p {
            font-size: 13px;
            margin: 8px 0;
            line-height: 1.5;
        }

        footer p1 {
            font-size: 13px;
            text-align: left;
        }

        footer::before {
            content: "";
            display: block;
            width: 68%;
            margin: 0 auto;
            border-top: 1px solid #ccc;
            margin-bottom: 10px;
}

    @media (max-width: 1024px) {
        .navbar {
                display: grid;
                grid-template-columns: auto 1fr auto;
            align-items: center;
            height: 85px;
            padding: 0 8px 10px 8px;
        }

        .navbar .login a {
            margin: 0 !important;
        }

        .navbar .login {
                grid-column: 3;
            margin-left: auto;
            display: flex;
                flex-direction: row;
                gap: 2px;  /* Í∞ÑÍ≤©ÏùÑ 8pxÏóêÏÑú 2pxÎ°ú Ï§ÑÏûÑ */
            align-items: center;
        }
        
        /* Î°úÍ∑∏Ïù∏ Î≤ÑÌäºÎèÑ 30% ÏûëÍ≤å */
        .login a,
        .login-item {
            font-size: 11.2px !important;  /* 30% Í∞êÏÜå (Í∏∞Î≥∏ 16px Í∏∞Ï§Ä) */
            padding: 4.2px 8.4px !important;  /* 30% Í∞êÏÜå */
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }
        
        .login-icon {
            height: 14px !important;  /* 30% Í∞êÏÜå: 20px -> 14px */
            width: auto !important;
            margin-right: 3.5px !important;  /* 30% Í∞êÏÜå: 5px -> 3.5px */
            display: inline-block !important;
            vertical-align: middle !important;
        }

        .navbar > div:not(.logo):not(.login):not(.mobile-only) {
            display: none;
        }

        /* ÏûÑÏßÅÏõê ÌéòÏù¥ÏßÄÏóêÏÑúÎäî ÏûÑÏßÅÏõê Î≤ÑÌäº Ïà®ÍπÄ */
        .employee-btn {
            display: none !important;
        }

        .footer-top { display: none; }
        
        /* Î™®Î∞îÏùºÏóêÏÑú Î°úÍ∑∏ÏïÑÏõÉ ÌÉÄÏù¥Î®∏ Ïà®ÍπÄ */
        #logout-timer {
            display: none !important;
        }
        
            .navbar > .logo { 
                margin-right: 0;
            }

        .hamburger {
            grid-column: 1;
            display: inline-flex;
                width: 28px;
                height: 24px;
            position: relative;
            justify-self: start;
                padding: 0;
                border: 0;
                background: transparent;
                cursor: pointer;
                z-index: 1003 !important;
                align-items: center;
                justify-content: center;
                margin-right: auto;
        }

        .hamburger .bar {
            position: absolute; left: 0; right: 0;
            height: 2px; background: #000; margin: 0;
        }
        
        .hamburger .bar:nth-child(1) { top: 2px; }
        .hamburger .bar:nth-child(2) { top: 11px; }
        .hamburger .bar:nth-child(3) { bottom: 2px; }

        .navbar .logo {
            grid-column: 2;
            justify-self: start;
            align-self: center;
            position: static;
            transform: none;
            z-index: 1;
            margin-top: 0;
            margin-left: 0;
        }

        .navbar .logo img {
            height: 40px;
            overflow: visible;
        }

        .navbar .logo span {
            font-size: 14px !important;
            font-weight: bold;
        }

        .mobile-drawer {
            position: fixed;
            top: 59px;
            left: 0;
            width: 80%;
            max-width: 340px;
            height: calc(100vh - 59px);
            background: #fff;
            box-shadow: 2px 0 12px rgba(0,0,0,0.15);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            display: flex !important;
            flex-direction: column;
            padding: 16px 20px;
            gap: 8px;
            z-index: 1001;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .mobile-drawer a {
            padding: 12px 16px;
            border-bottom: 1px solid #eee;
            text-align: left;
            font-weight: 600;
            font-size: 16px;
            color: #212529;
            text-decoration: none;
            transition: all 0.3s ease;
            border-radius: 8px;
            margin: 2px 0;
        }
        
        .mobile-drawer a:hover {
            background: rgba(68, 170, 107, 0.1);
            color: #44aa6b;
            padding-left: 20px;
        }

        .mobile-drawer.open { transform: translateX(0); }

        .body.menu-open { overflow: hidden; }
        .overlay.menu-open { display: block !important; }

            .secondary-navbar {
                flex-wrap: wrap;
                padding: 0;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                gap: 4px;
            }

            .secondary-navbar a {
                padding: 14px 16px;
                font-size: 14px;
                border-bottom: 3px solid transparent;
                min-height: 44px;
                white-space: nowrap;
                flex-shrink: 0;
                box-sizing: border-box;
            }
            
            .secondary-navbar a:hover {
                background: rgba(255, 255, 255, 0.1);
                border-bottom-color: rgba(255, 255, 255, 0.5);
            }
            
            .secondary-navbar a.active {
                background: rgba(255, 255, 255, 0.15);
                border-bottom-color: #fff;
                font-weight: 700;
            }

            /* Î™®Î∞îÏùºÏóêÏÑú Îç∞Ïä§ÌÅ¨ÌÜ± ÎèÑÍµ¨ Î≤ÑÌäº Ïà®ÍπÄ */
            .desktop-tool-btn {
                display: none !important;
            }

            /* Î™®Î∞îÏùº ÎèÑÍµ¨ ÏïÑÏù¥ÏΩò ÌëúÏãú */
            .mobile-tool-icons {
                display: flex !important;
            }

            .board-section {
                margin: 15px auto;
                padding: 20px 12px;
                border-radius: 16px;
                max-width: 100%;
                box-sizing: border-box;
            }

            .board-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
                margin-bottom: 20px;
                padding-bottom: 15px;
            }

            .board-header h2 {
                font-size: 22px;
                margin: 0;
            }

            .board-table {
                font-size: 13px;
                padding: 10px 0;
                width: 100% !important;
                max-width: 100% !important;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                position: relative;
                box-sizing: border-box;
            }

            .table-header {
                grid-template-columns: 45px 1fr 70px 75px;
                gap: 6px;
                font-size: 12px;
                padding: 14px 8px;
                min-width: 100%;
                width: max-content;
                position: sticky;
                top: 0;
                background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
                z-index: 10;
            }

            .table-body {
                width: 100% !important;
                max-width: 100% !important;
                min-width: 0 !important;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                position: relative;
                box-sizing: border-box;
            }

            .table-row {
                grid-template-columns: 45px 1fr 70px 75px !important;
                font-size: 13px !important;
                padding: 14px 8px !important;
                gap: 6px;
                min-width: 100%;
                width: max-content;
                position: static !important;
                left: auto !important;
            }

            .table-row span {
                font-size: 13px !important;
                padding: 0 6px !important;
                line-height: 1.5 !important;
                height: auto !important;
                min-height: 20px;
                word-break: break-word;
                white-space: normal !important;
                overflow: visible !important;
                text-overflow: clip !important;
            }

            .table-row span:nth-child(2) {
                width: auto !important;
                min-width: 150px !important;
                max-width: none !important;
                text-align: left !important;
            }

            .table-row span:nth-child(2) a {
                display: block;
                width: 100%;
                word-break: break-word;
                white-space: normal;
                overflow: visible;
                text-overflow: clip;
            }

            .table-row button {
                font-size: 11px !important;
                padding: 6px 10px !important;
                min-width: 50px !important;
                min-height: 36px !important;
                height: auto !important;
                line-height: 1.4 !important;
            }

            .table-empty {
                padding: 50px 15px;
                font-size: 15px;
                margin: 15px auto;
                width: 100% !important;
                max-width: 100% !important;
                min-width: 0 !important;
                box-sizing: border-box;
                display: block;
            }

            .board-footer {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
                margin-top: 20px;
            }

            .search-group {
                width: 100%;
                flex-direction: column;
                gap: 10px;
            }

            .search-group select {
                width: 100%;
                padding: 12px 14px;
                font-size: 15px;
                min-height: 44px;
                box-sizing: border-box;
            }

            .search-group input {
                width: 100%;
                flex: 1;
                padding: 12px 16px;
                font-size: 15px;
                min-height: 44px;
                box-sizing: border-box;
            }

            .search-group button {
                width: 100%;
                padding: 12px 20px;
                font-size: 15px;
                min-height: 44px;
                box-sizing: border-box;
            }

            .action-buttons {
                width: 100%;
                flex-direction: column;
                gap: 10px;
            }

            .action-buttons button {
                width: 100%;
                padding: 14px 20px;
                font-size: 15px;
                min-height: 44px;
                box-sizing: border-box;
            }

            /* ÌöåÏõêÍ¥ÄÎ¶¨ ÌÖåÏù¥Î∏î Î™®Î∞îÏùº Ïä§ÌÉÄÏùº - Ïù¥Î¶Ñ, ÌöåÏõêÏú†Ìòï, ÏäπÏù∏Ïó¨Î∂ÄÎßå ÌëúÏãú */
            #member-section {
                padding: 20px 12px !important;
                overflow-x: visible;
                -webkit-overflow-scrolling: touch;
            }

            #member-section .board-table {
                width: 100%;
                overflow-x: visible;
                -webkit-overflow-scrolling: touch;
            }

            #member-section .table-header {
                grid-template-columns: 1fr 100px 120px !important;
                min-width: 100% !important;
                width: 100% !important;
                font-size: 12px;
                padding: 8px 5px;
                gap: 4px;
                align-items: flex-end !important;
            }

            /* Î™®Î∞îÏùºÏóêÏÑú ÏïÑÏù¥Îîî, Ïù¥Î©îÏùº, Ïã†Ï≤≠Ïùº, Í¥ÄÎ¶¨ Ïª¨Îüº Ïà®ÍπÄ */
            #member-section .table-header span:nth-child(1),
            #member-section .table-header span:nth-child(3),
            #member-section .table-header span:nth-child(5),
            #member-section .table-header span:nth-child(7),
            #member-section .table-row span:nth-child(1),
            #member-section .table-row span:nth-child(3),
            #member-section .table-row span:nth-child(5),
            #member-section .table-row span:nth-child(7) {
                display: none !important;
            }


            #member-section .table-row {
                grid-template-columns: 1fr 100px 120px !important;
                min-width: 100% !important;
                width: 100% !important;
                font-size: 13px !important;
                padding: 8px 5px !important;
                gap: 4px;
                position: static !important;
                align-items: start !important;
            }

            /* Î™®Î∞îÏùºÏóêÏÑú ÏïÑÏù¥Îîî, Ïù¥Î©îÏùº, Ïã†Ï≤≠Ïùº, Í¥ÄÎ¶¨ Ïª¨Îüº Ïà®ÍπÄ (Ïù¥Î¶Ñ, ÌöåÏõêÏú†Ìòï, ÏäπÏù∏Ïó¨Î∂ÄÎßå ÌëúÏãú) */
            #member-section .table-row span:nth-child(1),
            #member-section .table-row span:nth-child(3),
            #member-section .table-row span:nth-child(5),
            #member-section .table-row span:nth-child(7) {
                display: none !important;
            }

            #member-section .table-row span {
                font-size: 13px !important;
                white-space: nowrap !important;
                overflow: hidden !important;
                text-overflow: ellipsis !important;
            }

            /* Ïù¥Î¶Ñ Ïª¨Îüº (2Î≤àÏß∏) - Ï§ëÏïô Ï†ïÎ†¨, ÏÉÅÎã® Ï†ïÎ†¨ */
            #member-section .table-row span:nth-child(2) {
                text-align: center !important;
                display: flex !important;
                align-items: start !important;
                justify-content: center !important;
                padding-top: 0 !important;
                margin-top: 0 !important;
                vertical-align: top !important;
            }

            /* ÌöåÏõêÏú†Ìòï Ïª¨Îüº (4Î≤àÏß∏) - Ï§ëÏïô Ï†ïÎ†¨, ÏÉÅÎã® Ï†ïÎ†¨ */
            #member-section .table-row span:nth-child(4) {
                text-align: center !important;
                display: flex !important;
                align-items: flex-start !important;
                justify-content: center !important;
            }

            /* ÏäπÏù∏Ïó¨Î∂Ä Ïª¨Îüº (6Î≤àÏß∏) - Ï§ëÏïô Ï†ïÎ†¨, ÏÉÅÎã® Ï†ïÎ†¨ */
            #member-section .table-row span:nth-child(6) {
                text-align: center !important;
                display: flex !important;
                align-items: start !important;
                justify-content: center !important;
                gap: 4px;
                padding-top: 0 !important;
                margin-top: 0 !important;
            }

            /* ÏäπÏù∏ÏôÑÎ£å ÌÉ≠Ïùò Ï≤¥ÌÅ¨ ÌëúÏãú Ïä§ÌÉÄÏùº */
            #member-section .table-row span:nth-child(6) span {
                display: inline-block !important;
                color: #44aa6b !important;
                font-size: 20px !important;
                font-weight: bold !important;
            }

            /* ÏäπÏù∏Ïó¨Î∂Ä Î≤ÑÌäº Î™®Î∞îÏùºÏóêÏÑú Îç∞Ïä§ÌÅ¨ÌÜ± ÌÅ¨Í∏∞ Ïú†ÏßÄ */
            #member-section .table-row span:nth-child(6) .icon-btn,
            #member-section .table-row span:nth-child(6) .approve-btn,
            #member-section .table-row span:nth-child(6) .reject-btn {
                width: 17px !important;
                height: 17px !important;
                min-width: 17px !important;
                min-height: 17px !important;
                padding: 0 !important;
                font-size: 16px !important;
                line-height: 1 !important;
            }

            /* Ìó§ÎçîÎèÑ ÏÉÅÎã® Ï†ïÎ†¨Î°ú ÎßûÏ∂§ */
            #member-section .table-header {
                align-items: start !important;
            }

            #member-section .table-header span {
                display: flex !important;
                align-items: start !important;
                justify-content: center !important;
                text-align: center !important;
                padding-top: 0 !important;
                margin-top: 0 !important;
            }

            /* Ìó§ÎçîÏùò Ïù¥Î¶Ñ Ïª¨ÎüºÏùÄ Ï§ëÏïô Ï†ïÎ†¨ */
            #member-section .table-header span:nth-child(2) {
                justify-content: center !important;
                text-align: center !important;
            }

            /* ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò Î™®Î∞îÏùº Ïä§ÌÉÄÏùº */
            .pagination {
                flex-wrap: wrap;
                gap: 6px;
                justify-content: center;
                padding: 10px 0;
            }

            .pagination button,
            .pagination-dot {
                min-width: 44px;
                min-height: 44px;
                padding: 10px 14px;
                font-size: 15px;
                box-sizing: border-box;
            }

            #pagination,
            #member-pagination {
                font-size: 18px !important;
                margin-top: 20px;
                padding: 0 10px;
            }

        footer { 
                padding: 14px 12px 18px;
        }

        footer::before{
                width: 90%;
            margin-bottom: 10px;
        }

        footer p, footer .footer-info{
                font-size: 10px;
                line-height: 1.35;
                letter-spacing: 0;
                text-align: left;
            margin: 4px 0;
        }

            .write-form {
                padding: 24px 16px;
                max-width: 95%;
                width: calc(100% - 32px);
                max-height: 90vh;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                box-sizing: border-box;
            }

            .write-form h2 {
                font-size: 20px;
                margin-bottom: 20px;
            }

            .write-form input,
            .write-form textarea {
                width: calc(100% - 32px);
                padding: 12px 14px;
                font-size: 16px;
                min-height: 44px;
                box-sizing: border-box;
            }

            .write-form textarea {
                min-height: 200px;
            }

            .write-form button {
                width: 100%;
                padding: 14px 20px;
                font-size: 15px;
                min-height: 44px;
                margin-right: 0;
                margin-bottom: 10px;
                box-sizing: border-box;
            }

            .write-form .cancel-btn {
                width: 100%;
            }

            .post-modal {
                padding: 20px 16px;
                max-width: 95%;
                width: calc(100% - 32px);
                max-height: 90vh;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                box-sizing: border-box;
            }

            .post-modal h3 {
                font-size: 20px;
                margin-bottom: 16px;
                padding-right: 30px;
            }

            .post-modal .post-meta {
                font-size: 13px;
                padding: 10px 12px;
                margin-bottom: 16px;
            }

            .post-modal .post-content {
                font-size: 14px;
                padding: 16px;
                line-height: 1.7;
                word-break: break-word;
                overflow-wrap: break-word;
            }

            .post-modal .close-btn {
                top: 12px;
                right: 12px;
                font-size: 28px;
                padding: 8px;
                min-width: 44px;
                min-height: 44px;
            }

            .post-modal-actions {
                flex-direction: column;
                gap: 10px;
            }

            .post-delete-btn {
                width: 100%;
                padding: 14px 20px;
                font-size: 15px;
                min-height: 44px;
                box-sizing: border-box;
            }
            
            .partner-logos {
                gap: 16px;
                padding: 25px 15px;
            }
            
            .partner-logos a {
                width: 35px;
                height: 35px;
                min-width: 35px;
                padding: 6px;
            }
            
            .partner-logos img {
                max-width: 100%;
                max-height: 100%;
            }
        }

        /* Îç∞Ïä§ÌÅ¨ÌÜ±ÏóêÏÑú ÌñÑÎ≤ÑÍ±∞ Î≤ÑÌäºÍ≥º Î™®Î∞îÏùº ÎìúÎ°úÏñ¥ Ïà®ÍπÄ */
        @media (min-width: 1025px) {
            .hamburger { 
                display: none; 
                background: transparent; 
                border: 0; 
                padding: 8px; 
                cursor: pointer; 
            }
            .mobile-drawer { 
                display: none !important; 
            }
        }
    </style>
</head>

    <body>
    <div class="overlay" id="overlay"></div>

    <div class="login-container" id="login-container">
        <!-- ÌÉ≠ Î≤ÑÌäº -->
        <div class="auth-tabs">
            <button class="auth-tab active" onclick="showAuthTab('login')">Î°úÍ∑∏Ïù∏</button>
            <button class="auth-tab" onclick="showAuthTab('register')">ÌöåÏõêÍ∞ÄÏûÖ</button>
        </div>
        
        <!-- Î°úÍ∑∏Ïù∏ Ìèº -->
        <div id="login-form" class="auth-form">
            <input type="text" id="username" placeholder="ÏïÑÏù¥Îîî ÎòêÎäî Ïù¥Î©îÏùº">
            <input type="password" id="password" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏">
            <button type="button" onclick="login()">Î°úÍ∑∏Ïù∏</button>
        </div>
        
        <!-- ÌöåÏõêÍ∞ÄÏûÖ Ìèº -->
        <div id="register-form" class="auth-form" style="display: none;">
            <input type="text" id="reg-username" placeholder="ÏïÑÏù¥Îîî (4Ïûê Ïù¥ÏÉÅ)">
            <input type="password" id="reg-password" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏ (6Ïûê Ïù¥ÏÉÅ)">
            <input type="password" id="reg-password-confirm" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏">
            <input type="text" id="reg-name" placeholder="Ïù¥Î¶Ñ">
            <input type="email" id="reg-email" placeholder="Ïù¥Î©îÏùº">
            <input type="tel" id="reg-phone" placeholder="Ïó∞ÎùΩÏ≤ò">
            <select id="reg-user-type" style="width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; font-size: 14px;">
                <option value="general">ÏùºÎ∞òÌöåÏõê</option>
                <option value="employee">ÏûÑÏßÅÏõê</option>
            </select>
            <button onclick="register()">ÌöåÏõêÍ∞ÄÏûÖ Ïã†Ï≤≠</button>
            <p class="auth-notice">* ÌöåÏõêÍ∞ÄÏûÖ ÌõÑ Í¥ÄÎ¶¨Ïûê ÏäπÏù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.</p>
        </div>
    </div>

    <header class="navbar">
        <button class="hamburger" id="hamburger" aria-label="Î©îÎâ¥ Ïó¥Í∏∞" aria-controls="mobile-nav" aria-expanded="false">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>

        <div class="logo">
            <a href="../../index.html" style="display: block; text-decoration: none;">
                <img src="../image/logo-nav.png" alt="Î°úÍ≥†" style="height: 50px; overflow: visible;">
            </a>
        </div>

        <nav id="mobile-nav" class="mobile-drawer" role="navigation" aria-label="Î™®Î∞îÏùº Î©îÎâ¥">
            <a href="../../index.html">Ìôà</a>
            <a href="../company/company.html">ÌöåÏÇ¨ÏÜåÍ∞ú</a>
            <a href="../product/product.html">Ï†úÌíàÏÜåÍ∞ú</a>
            <a href="../../index.html#/school">ÎÇ©ÌíàÌïôÍµê Î¶¨Ïä§Ìä∏</a>
            <a href="../Gallery/Gallery.html">Í∞§Îü¨Î¶¨</a>
            <a href="../AS/AS.html">A/SÏã†Ï≤≠</a>
            <a href="#">Í≥†Í∞ùÏßÄÏõê</a>
        </nav>

        <div>
            <a href="../../index.html">Ìôà</a>
        </div>

        <div>
            <a href="../company/company.html">ÌöåÏÇ¨ÏÜåÍ∞ú</a>
        </div>
        
        <div>
            <a href="../product/product.html">Ï†úÌíàÏÜåÍ∞ú</a>
        </div>

        <div>
            <a href="../../index.html#/school">ÎÇ©ÌíàÌïôÍµê Î¶¨Ïä§Ìä∏</a>
        </div>

        <div>
            <a href="../Gallery/Gallery.html">Í∞§Îü¨Î¶¨</a>
        </div>

        <div>
            <a href="../AS/AS.html">A/SÏã†Ï≤≠</a>
        </div>

        <div>
            <a href="#">Í≥†Í∞ùÏßÄÏõê</a>
        </div>

        <div class="login">
            <a href="#" onclick="showLogin()" id="login-link" class="login-item">
                <img src="../image/login.png" alt="Î°úÍ∑∏Ïù∏" class="login-icon"> Î°úÍ∑∏Ïù∏
            </a>
            <a href="#" onclick="logout()" id="logout-link" class="login-item" style="display:none;">
                <img src="../image/logout.png" alt="Î°úÍ∑∏ÏïÑÏõÉ" class="login-icon"> Î°úÍ∑∏ÏïÑÏõÉ
            </a>
        </div>
    </header>

    <nav class="secondary-navbar">
        <a href="#" onclick="switchBoard('notice'); return false;" class="active" data-board="notice">Í≥µÏßÄÏÇ¨Ìï≠</a>
        <a href="#" onclick="switchBoard('staff'); return false;" data-board="staff">ÏßÅÏõêÍ≤åÏãúÌåê</a>
        <a href="#" onclick="switchBoard('suggestion'); return false;" data-board="suggestion">Ï†úÏïàÌôúÎèô</a>
        <a href="#" onclick="switchBoard('as-result'); return false;" data-board="as-result">A/S Ï≤òÎ¶¨Í≤∞Í≥º</a>
        <a href="#" onclick="switchBoard('photo-gallery'); return false;" data-board="photo-gallery">üì∑ ÌôúÎèôÏÇ¨ÏßÑÏ≤©</a>
        <a href="#" onclick="switchBoard('member-management'); return false;" data-board="member-management" style="background: rgba(255,215,0,0.2);">üë• ÌöåÏõêÍ¥ÄÎ¶¨</a>
        <a href="#" onclick="openCalculator(); return false;" class="desktop-tool-btn" style="background: rgba(100,200,255,0.2);"><img src="../image/calculator.png" alt="Í≥ÑÏÇ∞Í∏∞" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 4px;"> Í≥ÑÏÇ∞Í∏∞</a>
        <a href="#" onclick="openDrawingBoard(); return false;" class="desktop-tool-btn" style="background: rgba(255,150,200,0.2);">üé® Í∑∏Î¶ºÌåê</a>
    </nav>

    <!-- Î™®Î∞îÏùºÏö© ÎèÑÍµ¨ ÏïÑÏù¥ÏΩò -->
    <div class="mobile-tool-icons">
        <button onclick="openCalculator()" class="mobile-tool-btn" title="Í≥ÑÏÇ∞Í∏∞"><img src="../image/calculator.png" alt="Í≥ÑÏÇ∞Í∏∞" style="width: 26px; height: 26px; display: block;"></button>
        <button onclick="openDrawingBoard()" class="mobile-tool-btn" title="Í∑∏Î¶ºÌåê">üé®</button>
    </div>

    <!-- Í≥µÌÜµ Ïù∏Ï¶ù Ïä§ÌÅ¨Î¶ΩÌä∏ -->
    <script src="../js/auth.js"></script>

     <script>
        // Firebase Firestore Ï∞∏Ï°∞ (auth.jsÏóêÏÑú Ï¥àÍ∏∞ÌôîÎêú Í≤É ÏÇ¨Ïö©)
        let db = null;
        
        // auth.js Î°úÎìú ÌõÑ db ÏÑ§Ï†ï (ÏïàÏ†ÑÌïòÍ≤å)
        function initStaffDB() {
            // auth.jsÏùò Ï†ÑÏó≠ Î≥ÄÏàò ÏÇ¨Ïö©
            if (typeof authDb !== 'undefined' && authDb) {
                db = authDb;
                console.log('[Staff DB] authDbÏóêÏÑú Í∞ÄÏ†∏Ïò¥');
                return true;
            }
            
            // firebase.appsÏóêÏÑú ÏßÅÏ†ë Í∞ÄÏ†∏Ïò§Í∏∞ (Ïã±Í∏ÄÌÜ§ Î≥¥Ïû•)
            if (typeof firebase !== 'undefined' && firebase.apps.length > 0) {
                const app = firebase.app();
                db = app.firestore();
                console.log('[Staff DB] firebase.app()ÏóêÏÑú Í∞ÄÏ†∏Ïò¥ - App:', app.name);
                return true;
            }
            
            console.warn('[Staff DB] Firebase Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏùå');
            return false;
        }
        
        // Ï¶âÏãú ÏãúÎèÑ (auth.jsÍ∞Ä Î°úÎìúÎê† ÎïåÍπåÏßÄ ÎåÄÍ∏∞)
        let dbInitAttempts = 0;
        function tryInitStaffDB() {
            dbInitAttempts++;
            if (initStaffDB()) {
                console.log(`[Staff DB] Ï¥àÍ∏∞Ìôî ÏÑ±Í≥µ (ÏãúÎèÑ #${dbInitAttempts})`);
            } else {
                // ÏµúÎåÄ 20Î≤àÍπåÏßÄ Ïû¨ÏãúÎèÑ (2Ï¥à)
                if (dbInitAttempts < 20) {
                    setTimeout(tryInitStaffDB, 100);
                } else {
                    console.error('[Staff DB] Ï¥àÍ∏∞Ìôî Ïã§Ìå® - ÏµúÎåÄ ÏãúÎèÑ ÌöüÏàò Ï¥àÍ≥º');
                }
            }
        }
        
        // Ï¶âÏãú ÏãúÎèÑ
        tryInitStaffDB();

        let currentBoard = 'notice';
        let currentPage = {};
        let currentPostIndex = -1; // ÌòÑÏû¨ ÏÉÅÏÑ∏Î≥¥Í∏∞ Ï§ëÏù∏ Í≤åÏãúÍ∏Ä Ïù∏Îç±Ïä§
        const postsPerPage = 10;
        let allPosts = {
            notice: [],
            staff: [],
            suggestion: [],
            'as-result': []
        };

        // ÌéòÏù¥ÏßÄ Ï¥àÍ∏∞Ìôî
        Object.keys(allPosts).forEach(board => {
            currentPage[board] = 1;
        });

        // Ïä§ÌÉúÌîÑ ÌéòÏù¥ÏßÄ Ï†ëÏÜç Í∂åÌïú ÌôïÏù∏ Ìï®Ïàò
        // userÍ∞Ä ÌôïÏ†ïÎêú Ïù¥ÌõÑÏóêÎßå Ìò∏Ï∂úÎê® (onAuthStateChangedÏóêÏÑú)
        // Ïù¥ Ìï®ÏàòÎäî Firestore Î¶¨Ïä§ÎÑàÎ•º ÏãúÏûëÌïòÎäî Ïú†ÏùºÌïú ÏßÑÏûÖÏ†ê
        function checkStaffAccess() {
            console.log('[Staff ÌéòÏù¥ÏßÄ] checkStaffAccess() Ìò∏Ï∂ú - Firestore Î¶¨Ïä§ÎÑà ÏãúÏûë');
            
            // Ï†ëÍ∑º Í∂åÌïúÏù¥ ÏóÜÏúºÎ©¥ Ïã§ÌñâÌïòÏßÄ ÏïäÏùå
            if (!staffAccessGranted) {
                console.warn('[Staff ÌéòÏù¥ÏßÄ] checkStaffAccess() - Ï†ëÍ∑º Í∂åÌïú ÏóÜÏùå, Ïã§Ìñâ Ïïà Ìï®');
                return;
            }
            
            // DB Ï¥àÍ∏∞Ìôî ÌôïÏù∏
            if (!db) {
                initStaffDB();
            }
            
            // userÍ∞Ä ÌôïÏ†ïÎêú Ïù¥ÌõÑÏóêÎßå Firestore Î¶¨Ïä§ÎÑà ÏãúÏûë
            // Í≤åÏãúÍ∏Ä Î°úÎìú
            loadAllPosts();
            switchBoard('notice');
            
            // ÏûëÏÑ± Î≤ÑÌäº ÌëúÏãú Ïó¨Î∂Ä Ï¥àÍ∏∞Ìôî
            updateWriteButtonVisibility();
        }
        
        // Firestore Î¶¨Ïä§ÎÑà ÏãúÏûë Ìï®Ïàò (user ÌôïÏ†ï ÌõÑÏóêÎßå Ìò∏Ï∂ú)
        // Î™®Îì† Firestore ListenÏùÄ Ïù¥ Ìï®Ïàò ÎÇ¥Î∂ÄÏóêÏÑúÎßå ÏãúÏûë
        function startStaffListeners(user) {
            console.log('[Staff ÌéòÏù¥ÏßÄ] startStaffListeners() Ìò∏Ï∂ú - user:', user ? user.uid : 'null');
            
            if (!user) {
                console.error('[Staff ÌéòÏù¥ÏßÄ] startStaffListeners() - userÍ∞Ä nullÏù¥ÎØÄÎ°ú Î¶¨Ïä§ÎÑà ÏãúÏûë Î∂àÍ∞Ä');
                return;
            }
            
            if (!db) {
                console.error('[Staff ÌéòÏù¥ÏßÄ] startStaffListeners() - dbÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏùå');
                return;
            }
            
            // Ïó¨Í∏∞ÏÑúÎ∂ÄÌÑ∞ Firestore Î¶¨Ïä§ÎÑà ÏãúÏûë
            // loadAllPostsÎäî Ïù¥ÎØ∏ checkStaffAccess()ÏóêÏÑú Ìò∏Ï∂úÎêòÎØÄÎ°ú
            // Ï∂îÍ∞Ä Î¶¨Ïä§ÎÑàÍ∞Ä ÌïÑÏöîÌïòÎ©¥ Ïó¨Í∏∞Ïóê Ï∂îÍ∞Ä
            console.log('[Staff ÌéòÏù¥ÏßÄ] Firestore Î¶¨Ïä§ÎÑà ÏãúÏûë ÏôÑÎ£å');
        }

        // Ï†ëÍ∑º Ï†úÏñ¥ ÌîåÎûòÍ∑∏ (onAuthStateChangedÏóêÏÑúÎßå ÏÑ§Ï†ï)
        let staffAccessGranted = false;
        
        // staff ÌéòÏù¥ÏßÄ Ï†ëÍ∑º Ï†úÏñ¥ Ìï®Ïàò (onAuthStateChangedÏóêÏÑúÎßå Ìò∏Ï∂ú)
        // Ï†ÑÏó≠ Ìï®ÏàòÎ°ú Îì±Î°ùÌïòÏó¨ auth.jsÏóêÏÑú Ìò∏Ï∂ú Í∞ÄÎä•ÌïòÎèÑÎ°ù Ìï®
        // userÍ∞Ä ÌôïÏ†ïÎêú Ïù¥ÌõÑÏóêÎßå Ìò∏Ï∂úÎê®
        window.checkStaffAccess = function(user, userData) {
            console.log('[STAFF AUTH] user:', user ? user.uid : 'null', '| userData:', userData ? 'ÏûàÏùå' : 'ÏóÜÏùå');
            
            // Ïù¥ÎØ∏ Ï†ëÍ∑ºÏù¥ ÌóàÏö©ÎêòÏóàÏúºÎ©¥ Ï§ëÎ≥µ Ïã§Ìñâ Î∞©ÏßÄ
            if (staffAccessGranted) {
                console.log('[Staff ÌéòÏù¥ÏßÄ] Ïù¥ÎØ∏ Ï†ëÍ∑º ÌóàÏö©Îê®, Ï§ëÎ≥µ Ïã§Ìñâ Î∞©ÏßÄ');
                return;
            }
            
            // userÍ∞Ä ÏóÜÏúºÎ©¥ Ï†ëÍ∑º Ï∞®Îã® (ÌïòÏßÄÎßå signOutÏùÄ Ìò∏Ï∂úÌïòÏßÄ ÏïäÏùå)
            if (!user) {
                console.log('[Staff ÌéòÏù¥ÏßÄ] userÍ∞Ä null, Ï†ëÍ∑º Ï∞®Îã® (signOut Ìò∏Ï∂ú Ïïà Ìï®)');
                // UIÎ°úÎßå Ï†ëÍ∑º Ï∞®Îã® Ï≤òÎ¶¨ - Î°úÍ∑∏Ïù∏ Î™®Îã¨ ÌëúÏãú ÎòêÎäî Î¶¨Îã§Ïù¥Î†âÌä∏
                alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.\nÎ°úÍ∑∏Ïù∏ ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');
                window.location.href = '../../index.html';
                return;
            }
            
            // userDataÍ∞Ä ÏóÜÏúºÎ©¥ Ï†ëÍ∑º Ï∞®Îã®
            if (!userData) {
                console.log('[Staff ÌéòÏù¥ÏßÄ] userData ÏóÜÏùå, Ï†ëÍ∑º Ï∞®Îã®');
                alert('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.\nÌéòÏù¥ÏßÄÎ•º ÏÉàÎ°úÍ≥†Ïπ®Ìï¥Ï£ºÏÑ∏Ïöî.');
                window.location.href = '../../index.html';
                return;
            }
            
            // ÏûÑÏßÅÏõê Ïó¨Î∂Ä ÌôïÏù∏ (userDataÎäî Ïù¥ÎØ∏ FirestoreÏóêÏÑú Ï°∞ÌöåÎêú Îç∞Ïù¥ÌÑ∞)
            const isEmployee = userData.userType === 'employee' || userData.isAdmin === true;
            
            if (!isEmployee) {
                console.log('[Staff ÌéòÏù¥ÏßÄ] ÏûÑÏßÅÏõêÏù¥ ÏïÑÎãò, Ï†ëÍ∑º Ï∞®Îã®');
                alert('ÏûÑÏßÅÏõêÎßå Ï†ëÏÜçÌï† Ïàò ÏûàÏäµÎãàÎã§.');
                window.location.href = '../../index.html';
                return;
            }
            
            // Í∂åÌïú ÌôïÏù∏ ÏôÑÎ£å - Ïó¨Í∏∞ÏÑúÎ∂ÄÌÑ∞ Firestore Î¶¨Ïä§ÎÑà ÏãúÏûë
            console.log('[Staff ÌéòÏù¥ÏßÄ] Í∂åÌïú ÌôïÏù∏ ÏôÑÎ£å, Firestore Î¶¨Ïä§ÎÑà ÏãúÏûë');
            staffAccessGranted = true;
            
            // Firestore Î¶¨Ïä§ÎÑà ÏãúÏûë (user ÌôïÏ†ï ÌõÑ)
            checkStaffAccess(); // loadAllPosts Îì± Firestore Ï†ëÍ∑º ÏãúÏûë
            startStaffListeners(user); // Ï∂îÍ∞Ä Î¶¨Ïä§ÎÑàÍ∞Ä ÌïÑÏöîÌïòÎ©¥ Ïó¨Í∏∞ÏÑú ÏãúÏûë
        };

        // DOMContentLoadedÏóêÏÑúÎäî Ï†ëÍ∑º Ï†úÏñ¥Î•º ÏàòÌñâÌïòÏßÄ ÏïäÏùå
        // onAuthStateChangedÏóêÏÑúÎßå Ï†ëÍ∑º Ï†úÏñ¥ ÏàòÌñâ
        document.addEventListener("DOMContentLoaded", function() {
            console.log('[Staff ÌéòÏù¥ÏßÄ] DOMContentLoaded - onAuthStateChanged ÎåÄÍ∏∞ Ï§ë');
            // Ï†ëÍ∑º Ï†úÏñ¥Îäî onAuthStateChangedÏóêÏÑúÎßå ÏàòÌñâ
            
            // Ï¥àÍ∏∞ Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú ÌôïÏù∏ÌïòÏó¨ Î≤ÑÌäº ÌëúÏãú/Ïà®ÍπÄ
            const isLoggedIn = sessionStorage.getItem("loggedIn");
            const loginLink = document.getElementById('login-link');
            const logoutLink = document.getElementById('logout-link');
            
            if (isLoggedIn === 'true') {
                if (loginLink) loginLink.style.display = 'none';
                if (logoutLink) logoutLink.style.display = 'flex';
            } else {
                if (loginLink) loginLink.style.display = 'flex';
                if (logoutLink) logoutLink.style.display = 'none';
            }
        });

        // Firebase FirestoreÏóêÏÑú Í≤åÏãúÍ∏Ä Î°úÎìú (user ÌôïÏ†ï ÌõÑÏóêÎßå Ìò∏Ï∂ú)
        async function loadAllPosts() {
            // userÍ∞Ä ÌôïÏ†ïÎêòÏßÄ ÏïäÏïòÏúºÎ©¥ Ïã§ÌñâÌïòÏßÄ ÏïäÏùå
            if (!staffAccessGranted) {
                console.warn('[Staff ÌéòÏù¥ÏßÄ] loadAllPosts() - Ï†ëÍ∑º Í∂åÌïú ÏóÜÏùå, Ïã§Ìñâ Ïïà Ìï®');
                loadFromLocalStorage(); // localStorageÎßå ÏÇ¨Ïö©
                return;
            }
            
            if (db) {
                // Firebase Firestore ÏÇ¨Ïö©
                try {
                    for (const board of Object.keys(allPosts)) {
                        // Î¨∏ÏÑú Îã®Í±¥ getDocÎßå ÏÇ¨Ïö© (users Ïª¨Î†âÏÖò list/query Í∏àÏßÄ)
                        const snapshot = await db.collection('staffPosts').doc(board).get();
                        if (snapshot.exists) {
                            allPosts[board] = snapshot.data().posts || [];
                        } else {
                            // Í∏∞Ï°¥ localStorage Îç∞Ïù¥ÌÑ∞ ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò
                            const stored = localStorage.getItem(`staffPosts_${board}`);
                            if (stored) {
                                allPosts[board] = JSON.parse(stored);
                                // FirebaseÎ°ú ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò
                                await db.collection('staffPosts').doc(board).set({ posts: allPosts[board] });
                            }
                        }
                    }
                } catch (error) {
                    console.error('[Staff ÌéòÏù¥ÏßÄ] Firebase Î°úÎìú Ïã§Ìå®:', error);
                    // permission-denied Ïãú signOut Ìò∏Ï∂úÌïòÏßÄ ÏïäÏùå
                    if (error.code === 'permission-denied') {
                        alert('Í≤åÏãúÍ∏ÄÏùÑ Î∂àÎü¨Ïò¨ Í∂åÌïúÏù¥ ÏóÜÏäµÎãàÎã§.');
                    }
                    // Ïã§Ìå® Ïãú localStorage ÏÇ¨Ïö©
                    loadFromLocalStorage();
                }
            } else {
                // localStorage ÏÇ¨Ïö©
                loadFromLocalStorage();
            }
        }

        function loadFromLocalStorage() {
            Object.keys(allPosts).forEach(board => {
                const stored = localStorage.getItem(`staffPosts_${board}`);
                if (stored) {
                    allPosts[board] = JSON.parse(stored);
                }
            });
        }

        // Firebase FirestoreÏóê Í≤åÏãúÍ∏Ä Ï†ÄÏû•
        async function savePosts(board) {
            if (db) {
                // Firebase Firestore ÏÇ¨Ïö©
                try {
                    await db.collection('staffPosts').doc(board).set({ posts: allPosts[board] });
                } catch (error) {
                    console.error('Firebase Ï†ÄÏû• Ïã§Ìå®:', error);
                    // Ïã§Ìå® Ïãú localStorageÏóê Î∞±ÏóÖ
                    localStorage.setItem(`staffPosts_${board}`, JSON.stringify(allPosts[board]));
                }
            } else {
                // localStorage ÏÇ¨Ïö©
                localStorage.setItem(`staffPosts_${board}`, JSON.stringify(allPosts[board]));
            }
        }

        function switchBoard(boardType) {
            currentBoard = boardType;
            
            // ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÌôúÏÑ±Ìôî
            document.querySelectorAll('.secondary-navbar a').forEach(a => {
                a.classList.remove('active');
            });
            document.querySelector(`[data-board="${boardType}"]`).classList.add('active');

            // ÌöåÏõêÍ¥ÄÎ¶¨ ÌÉ≠ Ï≤òÎ¶¨
            const boardSection = document.querySelector('.board-section:not(#member-section)');
            const memberSection = document.getElementById('member-section');
            
            // ÌôúÎèôÏÇ¨ÏßÑÏ≤© ÏÑπÏÖò Ï≤òÎ¶¨
            const photoSection = document.getElementById('photo-gallery-section');
            
            if (boardType === 'member-management') {
                // Ï†ëÍ∑º Í∂åÌïú ÌôïÏù∏ (staffAccessGranted ÏÇ¨Ïö©)
                if (!staffAccessGranted) {
                    alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
                    switchBoard('notice');
                    return;
                }
                
                // Í¥ÄÎ¶¨Ïûê Í∂åÌïú ÌôïÏù∏ (sessionStorageÎäî UIÏö©ÏúºÎ°úÎßå ÏÇ¨Ïö©)
                const loggedInUser = sessionStorage.getItem('loggedInUser');
                if (!loggedInUser) {
                    alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
                    switchBoard('notice');
                    return;
                }
                const userData = JSON.parse(loggedInUser);
                if (!userData.isAdmin && userData.username !== 'admin') {
                    alert('Í¥ÄÎ¶¨ÏûêÎßå Ï†ëÍ∑ºÌï† Ïàò ÏûàÏäµÎãàÎã§.');
                    switchBoard('notice');
                    return;
                }
                
                boardSection.style.display = 'none';
                memberSection.style.display = 'block';
                if (photoSection) photoSection.style.display = 'none';
                // user ÌôïÏ†ï ÌõÑÏóêÎßå Firestore Ï†ëÍ∑º
                loadMembers();
                return;
            } else if (boardType === 'photo-gallery') {
                // Ï†ëÍ∑º Í∂åÌïú ÌôïÏù∏ (staffAccessGranted ÏÇ¨Ïö©)
                if (!staffAccessGranted) {
                    alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
                    switchBoard('notice');
                    return;
                }
                
                boardSection.style.display = 'none';
                memberSection.style.display = 'none';
                if (photoSection) photoSection.style.display = 'block';
                // user ÌôïÏ†ï ÌõÑÏóêÎßå Firestore Ï†ëÍ∑º
                loadPhotos();
                return;
            } else {
                boardSection.style.display = 'block';
                memberSection.style.display = 'none';
                if (photoSection) photoSection.style.display = 'none';
            }

            // Í≤åÏãúÌåê Ï†úÎ™© Î≥ÄÍ≤Ω
            const titles = {
                'notice': 'Í≥µÏßÄÏÇ¨Ìï≠',
                'staff': 'ÏßÅÏõêÍ≤åÏãúÌåê',
                'suggestion': 'Ï†úÏïàÌôúÎèô',
                'as-result': 'A/S Ï≤òÎ¶¨Í≤∞Í≥º'
            };

            document.getElementById('board-title').textContent = titles[boardType];
            
            // Í≥µÏßÄÏÇ¨Ìï≠Ïùº Îïå ÏûëÏÑ± Î≤ÑÌäº ÌëúÏãú Ïó¨Î∂Ä Í≤∞Ï†ï
            updateWriteButtonVisibility();
            
            // Í≤åÏãúÍ∏Ä Î†åÎçîÎßÅ
            renderPosts();
        }
        
        // ÏûëÏÑ± Î≤ÑÌäº ÌëúÏãú Ïó¨Î∂Ä ÏóÖÎç∞Ïù¥Ìä∏
        function updateWriteButtonVisibility() {
            const writeBtn = document.querySelector('.write');
            if (!writeBtn) return;
            
            // Í≥µÏßÄÏÇ¨Ìï≠ÏùÄ Í¥ÄÎ¶¨ÏûêÎßå ÏûëÏÑ± Í∞ÄÎä•
            if (currentBoard === 'notice') {
                const loggedInUser = sessionStorage.getItem('loggedInUser');
                if (loggedInUser) {
                    try {
                        const userData = JSON.parse(loggedInUser);
                        const isAdmin = userData.isAdmin || userData.username === 'admin';
                        writeBtn.style.display = isAdmin ? 'block' : 'none';
                    } catch (e) {
                        console.error('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÌååÏã± Ïò§Î•ò:', e);
                        writeBtn.style.display = 'none';
                    }
                } else {
                    writeBtn.style.display = 'none';
                }
            } else {
                // Îã§Î•∏ Í≤åÏãúÌåêÏùÄ Î™®Îëê ÏûëÏÑ± Í∞ÄÎä•
                writeBtn.style.display = 'block';
            }
        }

        function renderPosts() {
            const tbody = document.getElementById('board-tbody');
            const posts = allPosts[currentBoard];
            
            tbody.innerHTML = '';

            if (posts.length === 0) {
                tbody.innerHTML = '<div class="table-empty">Í≤åÏãúÍ∏ÄÏù¥ ÏóÜÏäµÎãàÎã§.</div>';
                renderPagination();
                return;
            }

            const start = (currentPage[currentBoard] - 1) * postsPerPage;
            const end = start + postsPerPage;
            const pagePosts = posts.slice(start, end);

            pagePosts.forEach((post, index) => {
                const row = document.createElement('div');
                row.className = 'table-row';
                const globalIndex = start + index;
                row.innerHTML = `
                    <span>${posts.length - globalIndex}</span>
                    <span><a href="#" onclick="viewPost(${globalIndex}); return false;">${post.title}</a></span>
                    <span>${post.author}</span>
                    <span>${post.date}</span>
                `;
                tbody.appendChild(row);
            });

            renderPagination();
        }

        function deletePost(index) {
            // ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
            const loggedInUser = sessionStorage.getItem('loggedInUser');
            if (!loggedInUser) {
                alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
                return;
            }
            
            const userData = JSON.parse(loggedInUser);
            const post = allPosts[currentBoard][index];
            const isAdmin = userData.isAdmin || userData.username === 'admin';
            
            // ÏÇ≠Ï†ú Í∂åÌïú Ï≤¥ÌÅ¨
            let canDelete = false;
            let errorMessage = '';
            
            if (currentBoard === 'notice') {
                // Í≥µÏßÄÏÇ¨Ìï≠: Í¥ÄÎ¶¨ÏûêÎßå ÏÇ≠Ï†ú Í∞ÄÎä•
                if (isAdmin) {
                    canDelete = true;
                } else {
                    errorMessage = 'Í≥µÏßÄÏÇ¨Ìï≠ÏùÄ Í¥ÄÎ¶¨ÏûêÎßå ÏÇ≠Ï†úÌï† Ïàò ÏûàÏäµÎãàÎã§.';
                }
            } else if (currentBoard === 'staff' || currentBoard === 'suggestion' || currentBoard === 'as-result') {
                // ÏßÅÏõêÍ≤åÏãúÌåê, Ï†úÏïàÌôúÎèô, A/S Ï≤òÎ¶¨Í≤∞Í≥º: ÏûëÏÑ±Ïûê ÎòêÎäî Í¥ÄÎ¶¨ÏûêÎßå ÏÇ≠Ï†ú Í∞ÄÎä•
                const isAuthor = post.author === userData.name || 
                                post.author === userData.username ||
                                (post.uid && post.uid === userData.uid);
                
                if (isAdmin || isAuthor) {
                    canDelete = true;
                } else {
                    errorMessage = 'ÏûëÏÑ±Ïûê ÎòêÎäî Í¥ÄÎ¶¨ÏûêÎßå ÏÇ≠Ï†úÌï† Ïàò ÏûàÏäµÎãàÎã§.';
                }
            } else {
                // Í∏∞ÌÉÄ Í≤åÏãúÌåê: Í∏∞Î≥∏Ï†ÅÏúºÎ°ú ÏûëÏÑ±Ïûê ÎòêÎäî Í¥ÄÎ¶¨ÏûêÎßå ÏÇ≠Ï†ú Í∞ÄÎä•
                const isAuthor = post.author === userData.name || 
                                post.author === userData.username ||
                                (post.uid && post.uid === userData.uid);
                
                if (isAdmin || isAuthor) {
                    canDelete = true;
                } else {
                    errorMessage = 'ÏûëÏÑ±Ïûê ÎòêÎäî Í¥ÄÎ¶¨ÏûêÎßå ÏÇ≠Ï†úÌï† Ïàò ÏûàÏäµÎãàÎã§.';
                }
            }
            
            if (!canDelete) {
                alert(errorMessage);
                return;
            }
            
            if (confirm("Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")) {
                allPosts[currentBoard].splice(index, 1);
                savePosts(currentBoard).then(() => {
                    // ÌòÑÏû¨ ÌéòÏù¥ÏßÄÍ∞Ä ÎπÑÏñ¥ÏûàÏúºÎ©¥ Ïù¥Ï†Ñ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô
                    const totalPages = Math.ceil(allPosts[currentBoard].length / postsPerPage);
                    if (currentPage[currentBoard] > totalPages && totalPages > 0) {
                        currentPage[currentBoard] = totalPages;
                    }
                    renderPosts();
                });
            }
        }

        function renderPagination() {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';
            
            const totalPages = Math.ceil(allPosts[currentBoard].length / postsPerPage);
            if (totalPages === 0) return;

            const prevBtn = document.createElement('span');
            prevBtn.textContent = '‚óÄ';
            prevBtn.className = 'pagination-dot';
            prevBtn.style.cursor = currentPage[currentBoard] > 1 ? 'pointer' : 'not-allowed';
            prevBtn.style.opacity = currentPage[currentBoard] > 1 ? '1' : '0.5';
            prevBtn.style.fontSize = '12px';
            prevBtn.style.width = '18px';
            prevBtn.style.height = '18px';
            prevBtn.onclick = () => {
                if (currentPage[currentBoard] > 1) {
                    currentPage[currentBoard]--;
                    renderPosts();
                }
            };
            pagination.appendChild(prevBtn);

            for (let i = 1; i <= totalPages; i++) {
                const dot = document.createElement('span');
                dot.textContent = '‚óè';
                dot.className = 'pagination-dot';
                if (i === currentPage[currentBoard]) {
                    dot.classList.add('active');
                }
                dot.onclick = () => {
                    currentPage[currentBoard] = i;
                    renderPosts();
                };
                pagination.appendChild(dot);
            }

            const nextBtn = document.createElement('span');
            nextBtn.textContent = '‚ñ∂';
            nextBtn.className = 'pagination-dot';
            nextBtn.style.cursor = currentPage[currentBoard] < totalPages ? 'pointer' : 'not-allowed';
            nextBtn.style.opacity = currentPage[currentBoard] < totalPages ? '1' : '0.5';
            nextBtn.style.fontSize = '12px';
            nextBtn.style.width = '18px';
            nextBtn.style.height = '18px';
            nextBtn.onclick = () => {
                if (currentPage[currentBoard] < totalPages) {
                    currentPage[currentBoard]++;
                    renderPosts();
                }
            };
            pagination.appendChild(nextBtn);
        }

        function showWriteForm() {
            // Í≥µÏßÄÏÇ¨Ìï≠ÏùÄ Í¥ÄÎ¶¨ÏûêÎßå ÏûëÏÑ± Í∞ÄÎä•
            if (currentBoard === 'notice') {
                const loggedInUser = sessionStorage.getItem('loggedInUser');
                if (!loggedInUser) {
                    alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
                    return;
                }
                
                try {
                    const userData = JSON.parse(loggedInUser);
                    const isAdmin = userData.isAdmin || userData.username === 'admin';
                    
                    if (!isAdmin) {
                        alert('Í≥µÏßÄÏÇ¨Ìï≠ÏùÄ Í¥ÄÎ¶¨ÏûêÎßå ÏûëÏÑ±Ìï† Ïàò ÏûàÏäµÎãàÎã§.');
                        return;
                    }
                } catch (e) {
                    console.error('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÌååÏã± Ïò§Î•ò:', e);
                    alert('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î•º ÌôïÏù∏Ìï† Ïàò ÏóÜÏäµÎãàÎã§.');
                    return;
                }
            }
            
            const writeForm = document.getElementById('write-form');
            const overlay = document.getElementById('overlay');
            
            if (!writeForm || !overlay) {
                console.error('write-form ÎòêÎäî overlay ÏöîÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
                return;
            }
            
            writeForm.style.display = 'block';
            overlay.style.display = 'block';
            
            const titleInput = document.getElementById('write-title');
            const authorInput = document.getElementById('write-author');
            const contentInput = document.getElementById('write-content');
            
            if (titleInput) titleInput.value = '';
            if (authorInput) authorInput.value = '';
            if (contentInput) contentInput.value = '';
        }

        function hideWriteForm() {
            const writeForm = document.getElementById('write-form');
            const overlay = document.getElementById('overlay');
            
            if (writeForm) writeForm.style.display = 'none';
            if (overlay) overlay.style.display = 'none';
        }

        function submitPost() {
            // Í≥µÏßÄÏÇ¨Ìï≠ÏùÄ Í¥ÄÎ¶¨ÏûêÎßå ÏûëÏÑ± Í∞ÄÎä•
            if (currentBoard === 'notice') {
                const loggedInUser = sessionStorage.getItem('loggedInUser');
                if (!loggedInUser) {
                    alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
                    return;
                }
                
                try {
                    const userData = JSON.parse(loggedInUser);
                    const isAdmin = userData.isAdmin || userData.username === 'admin';
                    
                    if (!isAdmin) {
                        alert('Í≥µÏßÄÏÇ¨Ìï≠ÏùÄ Í¥ÄÎ¶¨ÏûêÎßå ÏûëÏÑ±Ìï† Ïàò ÏûàÏäµÎãàÎã§.');
                        return;
                    }
                } catch (e) {
                    console.error('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÌååÏã± Ïò§Î•ò:', e);
                    alert('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î•º ÌôïÏù∏Ìï† Ïàò ÏóÜÏäµÎãàÎã§.');
                    return;
                }
            }
            
            const titleInput = document.getElementById('write-title');
            const authorInput = document.getElementById('write-author');
            const contentInput = document.getElementById('write-content');
            
            if (!titleInput || !authorInput || !contentInput) {
                console.error('ÏûÖÎ†• ÌïÑÎìúÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
                alert('Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. ÌéòÏù¥ÏßÄÎ•º ÏÉàÎ°úÍ≥†Ïπ®Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            
            const title = titleInput.value.trim();
            const author = authorInput.value.trim();
            const content = contentInput.value.trim();

            if (!title || !author || !content) {
                alert('Î™®Îì† Ìï≠Î™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî.');
                return;
            }

            // ÌòÑÏû¨ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞ (ÏûëÏÑ±Ïûê ÌôïÏù∏Ïö©)
            const loggedInUser = sessionStorage.getItem('loggedInUser');
            let uid = null;
            let username = null;
            let name = null;
            
            if (loggedInUser) {
                try {
                    const userData = JSON.parse(loggedInUser);
                    uid = userData.uid;
                    username = userData.username;
                    name = userData.name;
                } catch (e) {
                    console.error('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÌååÏã± Ïò§Î•ò:', e);
                }
            }
            
            const newPost = {
                title: title,
                author: author,
                content: content,
                date: new Date().toLocaleDateString('ko-KR'),
                uid: uid,  // ÏûëÏÑ±Ïûê UID Ï†ÄÏû•
                username: username,  // ÏûëÏÑ±Ïûê username Ï†ÄÏû•
                name: name  // ÏûëÏÑ±Ïûê name Ï†ÄÏû•
            };

            if (!allPosts[currentBoard]) {
                allPosts[currentBoard] = [];
            }
            
            allPosts[currentBoard].unshift(newPost);
            savePosts(currentBoard).then(() => {
                currentPage[currentBoard] = 1;
                renderPosts();
                hideWriteForm();
                alert('Í≤åÏãúÍ∏ÄÏù¥ Îì±Î°ùÎêòÏóàÏäµÎãàÎã§.');
            });
        }

        function viewPost(index) {
            const post = allPosts[currentBoard][index];
            if (!post) return;

            currentPostIndex = index; // ÌòÑÏû¨ Í≤åÏãúÍ∏Ä Ïù∏Îç±Ïä§ Ï†ÄÏû•
            document.getElementById('post-title').textContent = post.title;
            document.getElementById('post-meta').innerHTML = `
                <strong>ÏûëÏÑ±Ïûê:</strong> ${post.author} | <strong>ÏûëÏÑ±Ïùº:</strong> ${post.date}
            `;
            document.getElementById('post-content').textContent = post.content;
            
            // ÏÇ≠Ï†ú Î≤ÑÌäº ÌëúÏãú Ïó¨Î∂Ä Í≤∞Ï†ï
            const loggedInUser = sessionStorage.getItem('loggedInUser');
            const deleteBtn = document.getElementById('post-delete-btn');
            
            if (loggedInUser) {
                const userData = JSON.parse(loggedInUser);
                const isAdmin = userData.isAdmin || userData.username === 'admin';
                
                let canDelete = false;
                
                if (currentBoard === 'notice') {
                    // Í≥µÏßÄÏÇ¨Ìï≠: Í¥ÄÎ¶¨ÏûêÎßå ÏÇ≠Ï†ú Í∞ÄÎä•
                    canDelete = isAdmin;
                } else if (currentBoard === 'staff' || currentBoard === 'suggestion' || currentBoard === 'as-result') {
                    // ÏßÅÏõêÍ≤åÏãúÌåê, Ï†úÏïàÌôúÎèô, A/S Ï≤òÎ¶¨Í≤∞Í≥º: ÏûëÏÑ±Ïûê ÎòêÎäî Í¥ÄÎ¶¨ÏûêÎßå ÏÇ≠Ï†ú Í∞ÄÎä•
                    const isAuthor = post.author === userData.name || 
                                    post.author === userData.username ||
                                    (post.uid && post.uid === userData.uid);
                    canDelete = isAdmin || isAuthor;
                } else {
                    // Í∏∞ÌÉÄ Í≤åÏãúÌåê: Í∏∞Î≥∏Ï†ÅÏúºÎ°ú ÏûëÏÑ±Ïûê ÎòêÎäî Í¥ÄÎ¶¨ÏûêÎßå ÏÇ≠Ï†ú Í∞ÄÎä•
                    const isAuthor = post.author === userData.name || 
                                    post.author === userData.username ||
                                    (post.uid && post.uid === userData.uid);
                    canDelete = isAdmin || isAuthor;
                }
                
                deleteBtn.style.display = canDelete ? 'block' : 'none';
            } else {
                deleteBtn.style.display = 'none';
            }
            
            document.getElementById('post-modal').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        function closePostModal() {
            document.getElementById('post-modal').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            currentPostIndex = -1; // Ïù∏Îç±Ïä§ Ï¥àÍ∏∞Ìôî
            document.getElementById('post-delete-btn').style.display = 'none';
        }
        
        // Î™®Îã¨ÏóêÏÑú ÏÇ≠Ï†ú Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú Ìò∏Ï∂úÎêòÎäî Ìï®Ïàò
        function deletePostFromModal() {
            if (currentPostIndex === -1) return;
            deletePost(currentPostIndex);
            closePostModal();
        }

        function searchPosts() {
            const searchType = document.getElementById('search-type').value;
            const searchQuery = document.getElementById('search-input').value.trim().toLowerCase();
            
            if (!searchQuery) {
                renderPosts();
                return;
            }

            const filtered = allPosts[currentBoard].filter(post => {
                if (searchType === 'title') {
                    return post.title.toLowerCase().includes(searchQuery);
                } else {
                    return post.content.toLowerCase().includes(searchQuery);
                }
            });

            // Í≤ÄÏÉâ Í≤∞Í≥ºÎ•º ÏûÑÏãúÎ°ú Ï†ÄÏû•ÌïòÍ≥† Î†åÎçîÎßÅ
            const originalPosts = [...allPosts[currentBoard]];
            allPosts[currentBoard] = filtered;
            currentPage[currentBoard] = 1;
            renderPosts();
            
            // ÏõêÎ≥∏ Î≥µÏõê (Îã§Ïùå Í≤ÄÏÉâÏùÑ ÏúÑÌï¥)
            setTimeout(() => {
                allPosts[currentBoard] = originalPosts;
            }, 0);
        }

        // Ïò§Î≤ÑÎ†àÏù¥ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ (auth.jsÏóêÏÑú Î°úÍ∑∏Ïù∏ Í¥ÄÎ†® Ï≤òÎ¶¨)
        document.getElementById('overlay').addEventListener('click', function() {
            if (typeof hideLogin === 'function') hideLogin();
            hideWriteForm();
            closePostModal();
        });

        // Î™®Î∞îÏùº Î©îÎâ¥
        document.addEventListener('DOMContentLoaded', function () {
            const burger = document.getElementById('hamburger');
            const drawer = document.getElementById('mobile-nav');
            const overlay = document.getElementById('overlay');
            if (!burger || !drawer || !overlay) return;

            let prevFocus = null;
            function setState(open) {
                burger.setAttribute('aria-expanded', String(open));
                burger.setAttribute('aria-label', open ? 'Î©îÎâ¥ Îã´Í∏∞' : 'Î©îÎâ¥ Ïó¥Í∏∞');
                drawer.classList.toggle('open', open);
                document.body.classList.toggle('menu-open', open);
                overlay.classList.toggle('menu-open', open);
            }
            function openMenu() {
                const login = document.getElementById('login-container');
                if (login && login.style.display === 'block') hideLogin();
                prevFocus = document.activeElement;
                setState(true);
                const first = drawer.querySelector('a');
                if (first) first.focus();
            }
            function closeMenu() {
                setState(false);
                if (prevFocus && prevFocus.focus) prevFocus.focus();
                prevFocus = null;
            }
            function toggleMenu() {
                const isOpen = drawer.classList.contains('open');
                isOpen ? closeMenu() : openMenu();
            }

            burger.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                toggleMenu();
            });
            overlay.addEventListener('click', () => { if (drawer.classList.contains('open')) closeMenu(); });
            drawer.querySelectorAll('a').forEach(a => a.addEventListener('click', closeMenu));
            document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && drawer.classList.contains('open')) closeMenu(); });
            window.addEventListener('resize', () => { if (window.innerWidth > 1024 && drawer.classList.contains('open')) closeMenu(); });
  });
</script>

    <!-- Í≤åÏãúÌåê ÏÑπÏÖò -->
    <div class="board-section">
    <div class="board-header">
            <h2 id="board-title">Í≥µÏßÄÏÇ¨Ìï≠</h2>
      </div>
    <div class="board-table">
      <div class="table-header">
        <span>Î≤àÌò∏</span>
        <span>Í∏ÄÏ†úÎ™©</span>
        <span>Í∏ÄÏì¥Ïù¥</span>
        <span>ÏûëÏÑ±Ïùº</span>
    </div>
      <div id="board-tbody" class="table-body">
        <div class="table-empty">Í≤åÏãúÍ∏ÄÏù¥ ÏóÜÏäµÎãàÎã§.</div>
    </div>
    </div>
        <div id="pagination" style="display: flex; justify-content: center; margin-top: 15px; font-size: 20px;"></div>
    <div class="board-footer">
      <div class="search-group">
                <select id="search-type">
                    <option value="title">Ï†úÎ™©</option>
                    <option value="content">ÎÇ¥Ïö©</option>
        </select>
                <input type="text" id="search-input" placeholder="Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" onkeypress="if(event.key==='Enter') searchPosts();" />
                <button onclick="searchPosts()">Í≤ÄÏÉâ</button>
      </div>
      <div class="action-buttons">
                <button class="write" onclick="showWriteForm()">Í∏ÄÏì∞Í∏∞</button>
      </div>
    </div>
</div>

    <!-- Í∏ÄÏì∞Í∏∞ Ìèº -->
    <div id="write-form" class="write-form">
        <h2>Í≤åÏãúÍ∏Ä ÏûëÏÑ±</h2>
        <input type="text" id="write-title" placeholder="Ï†úÎ™©">
        <input type="text" id="write-author" placeholder="ÏûëÏÑ±Ïûê">
        <textarea id="write-content" placeholder="ÎÇ¥Ïö©"></textarea>
        <div style="text-align: right;">
            <button class="cancel-btn" onclick="hideWriteForm()">Ï∑®ÏÜå</button>
            <button onclick="submitPost()">Îì±Î°ù</button>
        </div>
    </div>

    <!-- Í≤åÏãúÍ∏Ä Î≥¥Í∏∞ Î™®Îã¨ -->
    <div id="post-modal" class="post-modal">
        <button class="close-btn" onclick="closePostModal()">&times;</button>
        <h3 id="post-title"></h3>
        <div id="post-meta" class="post-meta"></div>
        <div id="post-content" class="post-content"></div>
        <div class="post-modal-actions">
            <button id="post-delete-btn" class="post-delete-btn" onclick="deletePostFromModal()" style="display: none;">üóëÔ∏è ÏÇ≠Ï†ú</button>
        </div>
    </div>

    <!-- ÌöåÏõêÍ¥ÄÎ¶¨ ÏÑπÏÖò -->
    <div class="board-section" id="member-section" style="display: none;">
        <div class="board-header">
            <h2>üë• ÌöåÏõêÍ¥ÄÎ¶¨</h2>
        </div>
        
        <!-- ÌÉ≠ Î≤ÑÌäº -->
        <div style="display: flex; gap: 10px; margin-bottom: 20px;">
            <button class="member-tab active" onclick="showMemberTab('pending')" data-tab="pending">
                ÏäπÏù∏ ÎåÄÍ∏∞ <span id="pending-count" style="background: #ff6b6b; color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px; margin-left: 5px;">0</span>
            </button>
            <button class="member-tab" onclick="showMemberTab('approved')" data-tab="approved">ÏäπÏù∏ ÏôÑÎ£å</button>
            <button class="member-tab" onclick="showMemberTab('rejected')" data-tab="rejected">Í±∞Ï†àÎê®</button>
        </div>
        
        <div class="board-table">
            <div class="table-header">
                <span>ÏïÑÏù¥Îîî</span>
                <span>Ïù¥Î¶Ñ</span>
                <span>Ïù¥Î©îÏùº</span>
                <span>ÌöåÏõêÏú†Ìòï</span>
                <span>Ïã†Ï≤≠Ïùº</span>
                <span>ÏäπÏù∏Ïó¨Î∂Ä</span>
                <span></span>
            </div>
            <div id="member-tbody" class="table-body">
                <div class="table-empty">ÌöåÏõêÏù¥ ÏóÜÏäµÎãàÎã§.</div>
            </div>
        </div>
        <div id="member-pagination" style="display: flex; justify-content: center; margin-top: 15px; font-size: 20px;"></div>
    </div>

    <!-- ÌôúÎèôÏÇ¨ÏßÑÏ≤© ÏÑπÏÖò -->
    <div class="board-section" id="photo-gallery-section" style="display: none;">
        <div class="board-header">
            <h2>üì∑ ÌôúÎèôÏÇ¨ÏßÑÏ≤©</h2>
            <button class="inquiry-btn photo-upload-btn" onclick="openPhotoUpload()">üì§ ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú</button>
        </div>
        
        <!-- ÏÇ¨ÏßÑ Í∑∏Î¶¨Îìú -->
        <div class="photo-grid" id="photo-grid">
            <div class="photo-empty">
                <span>üì∑</span>
                <p>ÏïÑÏßÅ ÏóÖÎ°úÎìúÎêú ÏÇ¨ÏßÑÏù¥ ÏóÜÏäµÎãàÎã§.</p>
            </div>
        </div>
    </div>

    <!-- ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú Î™®Îã¨ -->
    <div id="photo-upload-modal" class="tool-modal" style="display: none;">
        <div class="tool-modal-content photo-upload-content">
            <div class="tool-modal-header">
                <h3>üì§ ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú</h3>
                <button class="tool-modal-close" onclick="closePhotoUpload()">&times;</button>
            </div>
            <div class="photo-upload-body">
                <div class="photo-upload-area" id="photo-upload-area" onclick="document.getElementById('photo-file-input').click()">
                    <input type="file" id="photo-file-input" accept="image/*" multiple style="display: none;" onchange="handlePhotoSelect(event)">
                    <div class="upload-icon">üì∑</div>
                    <p>ÌÅ¥Î¶≠ÌïòÏó¨ ÏÇ¨ÏßÑÏùÑ ÏÑ†ÌÉùÌïòÍ±∞ÎÇò<br>Ïó¨Í∏∞Î°ú ÎìúÎûòÍ∑∏ÌïòÏÑ∏Ïöî</p>
                    <span class="upload-hint">JPG, PNG, GIF (ÏµúÎåÄ 10MB)</span>
                </div>
                <div class="photo-upload-notice">
                    <div class="notice-icon">‚ÑπÔ∏è</div>
                    <div class="notice-content">
                        <strong>ÏûêÎèô ÏïïÏ∂ï ÏïàÎÇ¥</strong>
                        <p>ÏóÖÎ°úÎìúÎêú ÏÇ¨ÏßÑÏùÄ ÏûêÎèôÏúºÎ°ú ÏïïÏ∂ïÎê©ÎãàÎã§.<br>
                        ‚Ä¢ ÏµúÎåÄ Ìï¥ÏÉÅÎèÑ: 1200 x 1200px<br>
                        ‚Ä¢ ÏµúÏ¢Ö Ï†ÄÏû• ÌÅ¨Í∏∞: 800KB Ïù¥Ìïò</p>
                    </div>
                </div>
                <div class="photo-preview-grid" id="photo-preview-grid"></div>
                <div class="photo-upload-actions">
                    <button onclick="uploadPhotos()" class="upload-submit-btn" id="upload-submit-btn" disabled>ÏóÖÎ°úÎìú</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÏÇ¨ÏßÑ Î∑∞Ïñ¥ Î™®Îã¨ -->
    <div id="photo-viewer-modal" class="photo-viewer-modal" style="display: none;">
        <button class="photo-viewer-close" onclick="closePhotoViewer()">&times;</button>
        <button class="photo-viewer-nav photo-viewer-prev" onclick="prevPhoto()">‚Äπ</button>
        <div class="photo-viewer-content">
            <img id="photo-viewer-image" src="" alt="">
            <div class="photo-viewer-info">
                <span id="photo-viewer-date"></span>
                <span id="photo-viewer-author"></span>
                <button id="photo-delete-btn" class="photo-delete-btn" onclick="deletePhoto()" style="display: none;">üóëÔ∏è ÏÇ≠Ï†ú</button>
            </div>
        </div>
        <button class="photo-viewer-nav photo-viewer-next" onclick="nextPhoto()">‚Ä∫</button>
    </div>

    <style>
        /* ÌôúÎèôÏÇ¨ÏßÑÏ≤© Ïä§ÌÉÄÏùº */
        .photo-upload-btn {
            font-size: 12px !important;
            padding: 10px 20px !important;
            border-radius: 10px !important;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9) !important;
            border: 2px solid #cccccc !important;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
            color: #333 !important;
        }

        .photo-upload-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25) !important;
            background: rgba(255, 255, 255, 1) !important;
            border-color: #999999 !important;
        }

        .photo-upload-btn:active {
            transform: scale(0.95);
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2) !important;
        }

        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 4px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 12px;
            min-height: 300px;
        }

        .photo-item {
            aspect-ratio: 1;
            overflow: hidden;
            cursor: pointer;
            position: relative;
            border-radius: 4px;
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .photo-item:hover img {
            transform: scale(1.05);
        }

        .photo-item .photo-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            padding: 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .photo-item:hover .photo-overlay {
            opacity: 1;
        }

        .photo-overlay span {
            color: white;
            font-size: 11px;
        }

        .photo-empty {
            grid-column: 1 / -1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 80px;
            color: #6c757d;
        }

        .photo-empty span {
            font-size: 100px;
            opacity: 0.3;
            margin-bottom: 20px;
        }

        .photo-empty p {
            font-size: 20px;
            font-weight: 500;
        }

        /* ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú Î™®Îã¨ */
        .photo-upload-content {
            width: 90%;
            max-width: 600px;
        }

        .photo-upload-body {
            padding: 24px;
        }

        .photo-upload-area {
            border: 3px dashed #dee2e6;
            border-radius: 16px;
            padding: 50px 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .photo-upload-area:hover {
            border-color: #44aa6b;
            background: #f0fff4;
        }

        .photo-upload-area.dragover {
            border-color: #44aa6b;
            background: #e8f5e9;
        }

        .upload-icon {
            font-size: 72px;
            margin-bottom: 16px;
        }

        .photo-upload-area p {
            color: #495057;
            margin: 0 0 12px;
            font-size: 18px;
            font-weight: 500;
        }

        .upload-hint {
            color: #6c757d;
            font-size: 14px;
        }

        .photo-upload-notice {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-top: 16px;
            padding: 16px;
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            border-radius: 8px;
        }

        .notice-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .notice-content {
            flex: 1;
        }

        .notice-content strong {
            display: block;
            color: #1976d2;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .notice-content p {
            margin: 0;
            color: #424242;
            font-size: 13px;
            line-height: 1.6;
        }

        .photo-preview-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 16px;
            max-height: 200px;
            overflow-y: auto;
        }

        .photo-preview-item {
            aspect-ratio: 1;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
        }

        .photo-preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-preview-item .remove-btn {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 0, 0, 0.8);
            color: white;
            font-size: 14px;
            cursor: pointer;
        }

        .photo-upload-actions {
            margin-top: 20px;
            text-align: center;
        }

        .upload-submit-btn {
            padding: 14px 48px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(68, 170, 107, 0.3);
        }

        .upload-submit-btn:disabled {
            background: #e9ecef;
            color: #adb5bd;
            cursor: not-allowed;
            box-shadow: none;
        }

        .upload-submit-btn:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(68, 170, 107, 0.4);
        }

        /* ÏÇ¨ÏßÑ Î∑∞Ïñ¥ Î™®Îã¨ */
        .photo-viewer-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .photo-viewer-content {
            max-width: 90%;
            max-height: 85%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .photo-viewer-content img {
            max-width: 100%;
            max-height: calc(100vh - 150px);
            object-fit: contain;
            border-radius: 8px;
        }

        .photo-viewer-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 32px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .photo-viewer-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .photo-viewer-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 48px;
            width: 60px;
            height: 80px;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 8px;
        }

        .photo-viewer-prev { left: 20px; }
        .photo-viewer-next { right: 20px; }

        .photo-viewer-nav:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .photo-viewer-info {
            margin-top: 16px;
            color: white;
            display: flex;
            gap: 20px;
            align-items: center;
            font-size: 14px;
        }

        .photo-delete-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .photo-delete-btn:hover {
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .photo-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 2px;
            }

            .photo-preview-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .photo-viewer-nav {
                width: 40px;
                height: 60px;
                font-size: 32px;
            }

            .photo-viewer-prev { left: 10px; }
            .photo-viewer-next { right: 10px; }
        }
    </style>

    <script>
        // ÌôúÎèôÏÇ¨ÏßÑÏ≤© Î≥ÄÏàò
        let allPhotos = [];
        let currentPhotoIndex = 0;
        let selectedPhotoFiles = [];

        // Firebase Storage Ï∞∏Ï°∞
        let storage = null;
        if (typeof firebase !== 'undefined' && firebase.storage) {
            storage = firebase.storage();
        }

        // ÏÇ¨ÏßÑ Î™©Î°ù Î°úÎìú (user ÌôïÏ†ï ÌõÑÏóêÎßå Ìò∏Ï∂ú)
        async function loadPhotos() {
            // userÍ∞Ä ÌôïÏ†ïÎêòÏßÄ ÏïäÏïòÏúºÎ©¥ Ïã§ÌñâÌïòÏßÄ ÏïäÏùå
            if (!staffAccessGranted) {
                console.warn('[Staff ÌéòÏù¥ÏßÄ] loadPhotos() - Ï†ëÍ∑º Í∂åÌïú ÏóÜÏùå, Ïã§Ìñâ Ïïà Ìï®');
                return;
            }
            
            if (!db) {
                initStaffDB();
            }
            if (!db) {
                console.warn('Firebase ÎØ∏Ïó∞Í≤∞');
                return;
            }

            try {
                // users Ïª¨Î†âÏÖò list/query Í∏àÏßÄ, Î¨∏ÏÑú Îã®Í±¥Îßå ÏÇ¨Ïö©
                // activityPhotosÎäî ÏûÑÏßÅÏõêÎßå Ï†ëÍ∑º Í∞ÄÎä•ÌïòÎØÄÎ°ú Í∂åÌïú ÌôïÏù∏ ÌõÑ Ï°∞Ìöå
                const snapshot = await db.collection('activityPhotos')
                    .orderBy('createdAt', 'desc')
                    .get();
                
                allPhotos = [];
                snapshot.forEach(doc => {
                    allPhotos.push({ id: doc.id, ...doc.data() });
                });

                renderPhotoGrid();
            } catch (error) {
                console.error('[Staff ÌéòÏù¥ÏßÄ] ÏÇ¨ÏßÑ Î°úÎìú Ïò§Î•ò:', error);
                // permission-denied Ïãú signOut Ìò∏Ï∂úÌïòÏßÄ ÏïäÏùå
                if (error.code === 'permission-denied') {
                    alert('ÏÇ¨ÏßÑÏùÑ Î∂àÎü¨Ïò¨ Í∂åÌïúÏù¥ ÏóÜÏäµÎãàÎã§.');
                } else {
                    alert('ÏÇ¨ÏßÑÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
                }
            }
        }

        // ÏÇ¨ÏßÑ Í∑∏Î¶¨Îìú Î†åÎçîÎßÅ
        function renderPhotoGrid() {
            const grid = document.getElementById('photo-grid');
            
            if (allPhotos.length === 0) {
                grid.innerHTML = `
                    <div class="photo-empty">
                        <span>üì∑</span>
                        <p>ÏïÑÏßÅ ÏóÖÎ°úÎìúÎêú ÏÇ¨ÏßÑÏù¥ ÏóÜÏäµÎãàÎã§.</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = allPhotos.map((photo, index) => `
                <div class="photo-item" onclick="openPhotoViewer(${index})">
                    <img src="${photo.url}" alt="${photo.filename}" loading="lazy">
                    <div class="photo-overlay">
                        <span>${new Date(photo.createdAt).toLocaleDateString('ko-KR')}</span>
                    </div>
                </div>
            `).join('');
        }

        // ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú Î™®Îã¨ Ïó¥Í∏∞
        function openPhotoUpload() {
            const loggedInUser = sessionStorage.getItem('loggedInUser');
            if (!loggedInUser) {
                alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
                return;
            }
            
            selectedPhotoFiles = [];
            document.getElementById('photo-preview-grid').innerHTML = '';
            document.getElementById('upload-submit-btn').disabled = true;
            document.getElementById('photo-upload-modal').style.display = 'flex';
        }

        function closePhotoUpload() {
            document.getElementById('photo-upload-modal').style.display = 'none';
            selectedPhotoFiles = [];
        }

        // ÎìúÎûòÍ∑∏ Ïï§ ÎìúÎ°≠ ÏÑ§Ï†ï
        document.addEventListener('DOMContentLoaded', function() {
            const uploadArea = document.getElementById('photo-upload-area');
            if (uploadArea) {
                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });
                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('dragover');
                });
                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                    handlePhotoSelect({ target: { files: e.dataTransfer.files } });
                });
            }
        });

        // ÏÇ¨ÏßÑ ÏÑ†ÌÉù Ï≤òÎ¶¨
        function handlePhotoSelect(event) {
            const files = Array.from(event.target.files);
            const validFiles = files.filter(file => {
                if (!file.type.startsWith('image/')) {
                    alert(`${file.name}ÏùÄ(Îäî) Ïù¥ÎØ∏ÏßÄ ÌååÏùºÏù¥ ÏïÑÎãôÎãàÎã§.`);
                    return false;
                }
                if (file.size > 10 * 1024 * 1024) {
                    alert(`${file.name}ÏùÄ(Îäî) 10MBÎ•º Ï¥àÍ≥ºÌï©ÎãàÎã§.`);
                    return false;
                }
                return true;
            });

            selectedPhotoFiles = [...selectedPhotoFiles, ...validFiles];
            renderPhotoPreview();
        }

        // ÏÇ¨ÏßÑ ÎØ∏Î¶¨Î≥¥Í∏∞ Î†åÎçîÎßÅ
        function renderPhotoPreview() {
            const previewGrid = document.getElementById('photo-preview-grid');
            previewGrid.innerHTML = '';

            selectedPhotoFiles.forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const div = document.createElement('div');
                    div.className = 'photo-preview-item';
                    div.innerHTML = `
                        <img src="${e.target.result}" alt="ÎØ∏Î¶¨Î≥¥Í∏∞">
                        <button class="remove-btn" onclick="removePreviewPhoto(${index})">√ó</button>
                    `;
                    previewGrid.appendChild(div);
                };
                reader.readAsDataURL(file);
            });

            document.getElementById('upload-submit-btn').disabled = selectedPhotoFiles.length === 0;
        }

        // ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÇ¨ÏßÑ Ï†úÍ±∞
        function removePreviewPhoto(index) {
            selectedPhotoFiles.splice(index, 1);
            renderPhotoPreview();
        }

        // ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú
        async function uploadPhotos() {
            if (selectedPhotoFiles.length === 0) return;

            const loggedInUser = sessionStorage.getItem('loggedInUser');
            if (!loggedInUser) {
                alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
                return;
            }

            // DB ÌôïÏù∏
            if (!db) {
                initStaffDB();
            }
            if (!db) {
                alert('Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ Ïó∞Í≤∞Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.\nÌéòÏù¥ÏßÄÎ•º ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            // Storage Ïû¨Ï¥àÍ∏∞Ìôî
            if (!storage && typeof firebase !== 'undefined' && firebase.storage) {
                storage = firebase.storage();
            }

            const userData = JSON.parse(loggedInUser);
            const uploadBtn = document.getElementById('upload-submit-btn');
            
            // ÏûêÎèô ÏïïÏ∂ï ÏïàÎÇ¥ Î©îÏãúÏßÄ ÌëúÏãú (Ï≤´ ÏóÖÎ°úÎìú ÏãúÏóêÎßå)
            const hasShownNotice = sessionStorage.getItem('photoUploadNoticeShown');
            if (!hasShownNotice) {
                const noticeMsg = 'üì∏ ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú ÏïàÎÇ¥\n\n' +
                    'ÏóÖÎ°úÎìúÎêú ÏÇ¨ÏßÑÏùÄ ÏûêÎèôÏúºÎ°ú ÏïïÏ∂ïÎê©ÎãàÎã§:\n' +
                    '‚Ä¢ ÏµúÎåÄ Ìï¥ÏÉÅÎèÑ: 1200 x 1200px\n' +
                    '‚Ä¢ ÏµúÏ¢Ö Ï†ÄÏû• ÌÅ¨Í∏∞: 800KB Ïù¥Ìïò\n\n' +
                    'ÏïïÏ∂ïÏùÑ ÏãúÏûëÌï©ÎãàÎã§.';
                alert(noticeMsg);
                sessionStorage.setItem('photoUploadNoticeShown', 'true');
            }
            
            uploadBtn.disabled = true;
            uploadBtn.textContent = 'ÏóÖÎ°úÎìú Ï§ë...';

            try {
                for (const file of selectedPhotoFiles) {
                    const timestamp = Date.now();
                    const filename = `${timestamp}_${file.name}`;
                    let uploaded = false;
                    
                    // Firebase StorageÏóê ÏóÖÎ°úÎìú ÏãúÎèÑ
                    if (storage) {
                        try {
                            console.log('Storage ÏóÖÎ°úÎìú ÏãúÏûë:', filename);
                            console.log('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥:', {
                                uid: userData.uid,
                                username: userData.username,
                                name: userData.name
                            });
                            
                            const storageRef = storage.ref(`activity-photos/${filename}`);
                            const uploadTask = await storageRef.put(file);
                            const downloadURL = await uploadTask.ref.getDownloadURL();
                            console.log('Storage ÏóÖÎ°úÎìú ÏôÑÎ£å, URL:', downloadURL);

                            // FirestoreÏóê Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
                            console.log('Firestore Ï†ÄÏû• ÏãúÎèÑ...');
                            try {
                                await db.collection('activityPhotos').add({
                                    filename: filename,
                                    originalName: file.name,
                                    url: downloadURL,
                                    uploadedBy: userData.uid || userData.username,
                                    uploaderName: userData.name || userData.username,
                                    createdAt: new Date().toISOString()
                                });
                                console.log('Firestore Ï†ÄÏû• ÏÑ±Í≥µ');
                                uploaded = true;
                            } catch (firestoreError) {
                                console.error('Firestore Ï†ÄÏû• Ïò§Î•ò:', firestoreError);
                                throw firestoreError; // ÏÉÅÏúÑ catchÎ°ú Ï†ÑÎã¨
                            }
                        } catch (storageError) {
                            console.warn('Storage ÏóÖÎ°úÎìú Ïã§Ìå®, Base64Î°ú ÎåÄÏ≤¥:', storageError);
                            console.warn('Storage Ïò§Î•ò ÏÉÅÏÑ∏:', storageError.code, storageError.message);
                            // Storage ÏóÖÎ°úÎìú Ïã§Ìå® Ïãú Base64Î°ú Ï†ÄÏû•
                        }
                    }
                    
                    // Storage ÏóÖÎ°úÎìú Ïã§Ìå®ÌñàÍ±∞ÎÇò StorageÍ∞Ä ÏóÜÏúºÎ©¥ ÏïïÏ∂ïÎêú Base64Î°ú Ï†ÄÏû•
                    if (!uploaded) {
                        console.log('ÏïïÏ∂ïÎêú Base64Î°ú Ï†ÄÏû•');
                        const compressedBase64 = await compressImage(file, 800);
                        console.log('ÏïïÏ∂ï ÏôÑÎ£å, ÌÅ¨Í∏∞:', Math.round(compressedBase64.length / 1024), 'KB');
                        
                        console.log('Firestore Ï†ÄÏû• ÏãúÎèÑ...');
                        console.log('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥:', {
                            uid: userData.uid,
                            username: userData.username,
                            name: userData.name
                        });
                        
                        try {
                            await db.collection('activityPhotos').add({
                                filename: filename,
                                originalName: file.name,
                                url: compressedBase64,
                                uploadedBy: userData.uid || userData.username,
                                uploaderName: userData.name || userData.username,
                                createdAt: new Date().toISOString()
                            });
                            console.log('Firestore Ï†ÄÏû• ÏÑ±Í≥µ');
                        } catch (firestoreError) {
                            console.error('Firestore Ï†ÄÏû• Ïò§Î•ò:', firestoreError);
                            throw firestoreError; // ÏÉÅÏúÑ catchÎ°ú Ï†ÑÎã¨
                        }
                    }
                }

                alert('ÏÇ¨ÏßÑÏù¥ ÏóÖÎ°úÎìúÎêòÏóàÏäµÎãàÎã§!');
                closePhotoUpload();
                loadPhotos();
            } catch (error) {
                console.error('ÏóÖÎ°úÎìú Ïò§Î•ò:', error);
                console.error('Ïò§Î•ò ÏÉÅÏÑ∏:', error.code, error.message);
                
                let errorMessage = 'ÏóÖÎ°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.';
                
                if (error.code === 'permission-denied' || 
                    (error.message && error.message.includes('permission'))) {
                    errorMessage += '\n\n‚ùå Í∂åÌïúÏù¥ ÏóÜÏäµÎãàÎã§.';
                    errorMessage += '\n\nFirebase ConsoleÏóêÏÑú Îã§Ïùå Í∑úÏπôÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî:';
                    errorMessage += '\n1. Firestore > Í∑úÏπô: activityPhotos Ïª¨Î†âÏÖòÏóê create Í∂åÌïú';
                    errorMessage += '\n2. Storage > Í∑úÏπô: activity-photos Ìè¥ÎçîÏóê write Í∂åÌïú';
                    errorMessage += '\n\nÎ°úÍ∑∏Ïù∏ ÏÉÅÌÉú: ' + (loggedInUser ? 'Î°úÍ∑∏Ïù∏Îê®' : 'Î°úÍ∑∏Ïù∏ ÏïàÎê®');
                } else if (error.message) {
                    errorMessage += '\n\n' + error.message;
                    if (error.code) {
                        errorMessage += '\nÏò§Î•ò ÏΩîÎìú: ' + error.code;
                    }
                }
                
                alert(errorMessage);
            } finally {
                uploadBtn.disabled = false;
                uploadBtn.textContent = 'ÏóÖÎ°úÎìú';
            }
        }

        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        // Ïù¥ÎØ∏ÏßÄ ÏïïÏ∂ï Ìï®Ïàò (Firestore 1MB Ï†úÌïú ÎåÄÏùë)
        function compressImage(file, maxSizeKB = 800) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        let width = img.width;
                        let height = img.height;
                        
                        // ÏµúÎåÄ ÌÅ¨Í∏∞ Ï†úÌïú (Í∞ÄÎ°ú/ÏÑ∏Î°ú 1200px)
                        const maxDimension = 1200;
                        if (width > maxDimension || height > maxDimension) {
                            if (width > height) {
                                height = Math.round(height * maxDimension / width);
                                width = maxDimension;
                            } else {
                                width = Math.round(width * maxDimension / height);
                                height = maxDimension;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        // ÌíàÏßàÏùÑ Ï°∞Ï†àÌïòÎ©∞ ÏïïÏ∂ï
                        let quality = 0.8;
                        let result = canvas.toDataURL('image/jpeg', quality);
                        
                        // Î™©Ìëú ÌÅ¨Í∏∞ Ïù¥ÌïòÍ∞Ä Îê† ÎïåÍπåÏßÄ ÌíàÏßà ÎÇÆÏ∂îÍ∏∞
                        while (result.length > maxSizeKB * 1024 && quality > 0.1) {
                            quality -= 0.1;
                            result = canvas.toDataURL('image/jpeg', quality);
                        }
                        
                        resolve(result);
                    };
                    img.onerror = reject;
                    img.src = e.target.result;
                };
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        // ÏÇ¨ÏßÑ Î∑∞Ïñ¥ Ïó¥Í∏∞
        function openPhotoViewer(index) {
            currentPhotoIndex = index;
            const photo = allPhotos[index];
            
            document.getElementById('photo-viewer-image').src = photo.url;
            document.getElementById('photo-viewer-date').textContent = new Date(photo.createdAt).toLocaleDateString('ko-KR');
            document.getElementById('photo-viewer-author').textContent = `ÏóÖÎ°úÎçî: ${photo.uploaderName}`;
            
            // Í¥ÄÎ¶¨ÏûêÎßå ÏÇ≠Ï†ú Î≤ÑÌäº ÌëúÏãú
            const loggedInUser = sessionStorage.getItem('loggedInUser');
            const deleteBtn = document.getElementById('photo-delete-btn');
            if (loggedInUser) {
                const userData = JSON.parse(loggedInUser);
                deleteBtn.style.display = userData.isAdmin ? 'block' : 'none';
            }
            
            document.getElementById('photo-viewer-modal').style.display = 'flex';
        }

        function closePhotoViewer() {
            document.getElementById('photo-viewer-modal').style.display = 'none';
        }

        function prevPhoto() {
            if (currentPhotoIndex > 0) {
                openPhotoViewer(currentPhotoIndex - 1);
            }
        }

        function nextPhoto() {
            if (currentPhotoIndex < allPhotos.length - 1) {
                openPhotoViewer(currentPhotoIndex + 1);
            }
        }

        // ÏÇ¨ÏßÑ ÏÇ≠Ï†ú (Í¥ÄÎ¶¨Ïûê Ï†ÑÏö©)
        async function deletePhoto() {
            if (!confirm('Ïù¥ ÏÇ¨ÏßÑÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;

            const photo = allPhotos[currentPhotoIndex];
            
            try {
                // FirestoreÏóêÏÑú ÏÇ≠Ï†ú
                await db.collection('activityPhotos').doc(photo.id).delete();
                
                // StorageÏóêÏÑú ÏÇ≠Ï†ú ÏãúÎèÑ
                if (storage && photo.url.includes('firebase')) {
                    try {
                        const storageRef = storage.refFromURL(photo.url);
                        await storageRef.delete();
                    } catch (e) {
                        console.warn('Storage ÏÇ≠Ï†ú Ïã§Ìå®:', e);
                    }
                }

                alert('ÏÇ¨ÏßÑÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');
                closePhotoViewer();
                loadPhotos();
            } catch (error) {
                console.error('ÏÇ≠Ï†ú Ïò§Î•ò:', error);
                alert('ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
            }
        }

        // ÌÇ§Î≥¥Îìú Ïù¥Î≤§Ìä∏
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('photo-viewer-modal').style.display === 'flex') {
                if (e.key === 'Escape') closePhotoViewer();
                else if (e.key === 'ArrowLeft') prevPhoto();
                else if (e.key === 'ArrowRight') nextPhoto();
            }
        });

        // Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠
        document.getElementById('photo-upload-modal')?.addEventListener('click', function(e) {
            if (e.target === this) closePhotoUpload();
        });
        document.getElementById('photo-viewer-modal')?.addEventListener('click', function(e) {
            if (e.target === this) closePhotoViewer();
        });
    </script>

    <style>
        .member-tab {
            padding: 10px 20px;
            border: 2px solid #e9ecef;
            background: #fff;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #495057;
            transition: all 0.3s ease;
        }
        .member-tab:hover {
            border-color: #44aa6b;
            color: #44aa6b;
        }
        .member-tab.active {
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            color: white;
            border-color: transparent;
        }
        /* ÏïÑÏù¥ÏΩò Î≤ÑÌäº Ïä§ÌÉÄÏùº (ÎèôÍ∑∏ÎûÄ Ï≤¥ÌÅ¨/X Î≤ÑÌäº) */
        .icon-btn {
            width: 17px !important;
            height: 17px !important;
            padding: 0 !important;
            border-radius: 50% !important;
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-size: 16px !important;
            font-weight: bold !important;
            margin-left: 0px !important;
            margin-right: 0px !important;
            min-width: 17px !important;
            line-height: 1 !important;
            background-color: rgba(255, 255, 255, 1) !important;
            border-style: solid !important;
            border-width: 1px !important;
            border-color: rgba(0, 0, 0, 1) !important;
            box-shadow: 0px 4px 12px 0px rgba(0, 0, 0, 0.15) !important;
            gap: 3px !important;
        }
        
        .approve-btn {
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%) !important;
            color: white !important;
            border: none !important;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(68, 170, 107, 0.3);
        }
        .approve-btn:hover {
            transform: translateY(-1px) scale(1.1);
            box-shadow: 0 3px 8px rgba(68, 170, 107, 0.5);
        }
        .approve-btn:active {
            transform: translateY(0) scale(1);
        }
        
        .reject-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%) !important;
            color: white !important;
            border: none !important;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(255, 107, 107, 0.3);
        }
        .reject-btn:hover {
            transform: translateY(-1px) scale(1.1);
            box-shadow: 0 3px 8px rgba(255, 107, 107, 0.5);
        }
        .reject-btn:active {
            transform: translateY(0) scale(1);
        }
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-approved { background: #d4edda; color: #155724; }
        .status-rejected { background: #f8d7da; color: #721c24; }
    </style>

    <script>
        // ÌöåÏõê Í¥ÄÎ¶¨ Î≥ÄÏàò
        let allMembers = [];
        let currentMemberTab = 'pending';
        let memberCurrentPage = 1;
        const membersPerPage = 10;

        // ÌöåÏõê Î™©Î°ù Î°úÎìú (user ÌôïÏ†ï ÌõÑÏóêÎßå Ìò∏Ï∂ú)
        async function loadMembers() {
            // userÍ∞Ä ÌôïÏ†ïÎêòÏßÄ ÏïäÏïòÏúºÎ©¥ Ïã§ÌñâÌïòÏßÄ ÏïäÏùå
            if (!staffAccessGranted) {
                console.warn('[Staff ÌéòÏù¥ÏßÄ] loadMembers() - Ï†ëÍ∑º Í∂åÌïú ÏóÜÏùå, Ïã§Ìñâ Ïïà Ìï®');
                allMembers = [];
                updatePendingCount();
                renderMembers();
                return;
            }
            
            if (!db) {
                initStaffDB();
            }
            if (!db) {
                console.warn('Firebase ÎØ∏Ïó∞Í≤∞');
                allMembers = [];
                updatePendingCount();
                renderMembers();
                return;
            }
            
            // Í¥ÄÎ¶¨Ïûê Í∂åÌïú ÌôïÏù∏
            const loggedInUser = sessionStorage.getItem('loggedInUser');
            if (!loggedInUser) {
                console.warn('[Staff ÌéòÏù¥ÏßÄ] Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥ ÏóÜÏùå');
                allMembers = [];
                updatePendingCount();
                renderMembers();
                return;
            }
            
            let userData;
            try {
                userData = JSON.parse(loggedInUser);
            } catch (e) {
                console.error('[Staff ÌéòÏù¥ÏßÄ] ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÌååÏã± Ïò§Î•ò:', e);
                allMembers = [];
                updatePendingCount();
                renderMembers();
                return;
            }
            
            // Í¥ÄÎ¶¨ÏûêÍ∞Ä ÏïÑÎãàÎ©¥ Ï°∞Ìöå Î∂àÍ∞Ä
            if (!userData.isAdmin && userData.username !== 'admin') {
                console.warn('[Staff ÌéòÏù¥ÏßÄ] Í¥ÄÎ¶¨Ïûê Í∂åÌïú ÏóÜÏùå');
                allMembers = [];
                updatePendingCount();
                renderMembers();
                return;
            }
            
            // Í¥ÄÎ¶¨ÏûêÏùº Îïå users Ïª¨Î†âÏÖò Ï°∞Ìöå
            try {
                let snapshot;
                try {
                    // createdAtÏúºÎ°ú Ï†ïÎ†¨ ÏãúÎèÑ
                    snapshot = await db.collection('users')
                        .orderBy('createdAt', 'desc')
                        .get();
                } catch (indexError) {
                    // Ïù∏Îç±Ïä§ Ïò§Î•òÏù∏ Í≤ΩÏö∞ Ï†ïÎ†¨ ÏóÜÏù¥ Ï°∞Ìöå
                    if (indexError.code === 'failed-precondition') {
                        console.warn('[Staff ÌéòÏù¥ÏßÄ] Ïù∏Îç±Ïä§ ÏóÜÏùå, Ï†ïÎ†¨ ÏóÜÏù¥ Ï°∞Ìöå');
                        snapshot = await db.collection('users').get();
                        // ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ï∏°ÏóêÏÑú Ï†ïÎ†¨
                        const docs = [];
                        snapshot.forEach(doc => docs.push(doc));
                        docs.sort((a, b) => {
                            const aTime = a.data().createdAt?.toDate ? a.data().createdAt.toDate().getTime() : 0;
                            const bTime = b.data().createdAt?.toDate ? b.data().createdAt.toDate().getTime() : 0;
                            return bTime - aTime; // ÎÇ¥Î¶ºÏ∞®Ïàú
                        });
                        // Ï†ïÎ†¨Îêú Í≤∞Í≥ºÎ°ú snapshot Ïû¨Íµ¨ÏÑ±
                        snapshot = {
                            forEach: (callback) => docs.forEach(callback),
                            size: docs.length
                        };
                    } else {
                        throw indexError;
                    }
                }
                
                allMembers = [];
                snapshot.forEach(doc => {
                    const data = doc.data();
                    allMembers.push({
                        id: doc.id,
                        username: data.username || '',
                        name: data.name || '',
                        email: data.email || '',
                        phone: data.phone || '',
                        userType: data.userType || 'general',
                        status: data.status || 'pending', // status ÌïÑÎìú ÌôïÏù∏
                        createdAt: data.createdAt ? (data.createdAt.toDate ? data.createdAt.toDate() : data.createdAt) : null,
                        isAdmin: data.isAdmin || false
                    });
                });
                
                console.log(`[Staff ÌéòÏù¥ÏßÄ] ÌöåÏõê Î™©Î°ù Î°úÎìú ÏôÑÎ£å: ${allMembers.length}Î™Ö`);
                updatePendingCount();
                renderMembers();
            } catch (error) {
                console.error('[Staff ÌéòÏù¥ÏßÄ] ÌöåÏõê Î™©Î°ù Î°úÎìú Ïò§Î•ò:', error);
                if (error.code === 'permission-denied') {
                    const errorMsg = 'ÌöåÏõê Î™©Î°ùÏùÑ Î∂àÎü¨Ïò¨ Í∂åÌïúÏù¥ ÏóÜÏäµÎãàÎã§.\n\n' +
                        'Firebase ConsoleÏóêÏÑú Firestore Î≥¥Ïïà Í∑úÏπôÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî:\n' +
                        'Í¥ÄÎ¶¨Ïûê(isAdmin: true)Îäî users Ïª¨Î†âÏÖòÏùÑ Ï°∞ÌöåÌï† Ïàò ÏûàÏñ¥Ïïº Ìï©ÎãàÎã§.\n\n' +
                        'ÌïÑÏöîÌïú Î≥¥Ïïà Í∑úÏπô:\n' +
                        'match /users/{userId} {\n' +
                        '  allow read: if request.auth != null && \n' +
                        '    get(/databases/$(database)/documents/users/$(request.auth.uid)).data.isAdmin == true;\n' +
                        '}';
                    alert(errorMsg);
                    console.error('[Staff ÌéòÏù¥ÏßÄ] Firestore Î≥¥Ïïà Í∑úÏπô ÌôïÏù∏ ÌïÑÏöî:', error);
                } else if (error.code === 'failed-precondition') {
                    alert('Ïù∏Îç±Ïä§Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.\nFirebase ConsoleÏóêÏÑú Ïò§Î•ò Î©îÏãúÏßÄÏùò Ïù∏Îç±Ïä§ ÏÉùÏÑ± ÎßÅÌÅ¨Î•º ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî.');
                } else {
                    alert('ÌöåÏõê Î™©Î°ùÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\nÏò§Î•ò: ' + (error.message || error.code || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò'));
                }
                allMembers = [];
                updatePendingCount();
                renderMembers();
            }
        }

        // ÎåÄÍ∏∞ Ï§ë ÌöåÏõê Ïàò ÏóÖÎç∞Ïù¥Ìä∏
        function updatePendingCount() {
            const pendingCount = allMembers.filter(m => m.status === 'pending').length;
            const countEl = document.getElementById('pending-count');
            if (countEl) {
                countEl.textContent = pendingCount;
                countEl.style.display = pendingCount > 0 ? 'inline' : 'none';
            }
        }

        // ÌöåÏõê ÌÉ≠ Ï†ÑÌôò
        function showMemberTab(tab) {
            currentMemberTab = tab;
            memberCurrentPage = 1;
            document.querySelectorAll('.member-tab').forEach(t => {
                t.classList.toggle('active', t.dataset.tab === tab);
            });
            renderMembers();
        }

        // ÌöåÏõê Î™©Î°ù Î†åÎçîÎßÅ
        function renderMembers() {
            const tbody = document.getElementById('member-tbody');
            if (!tbody) return;

            const filteredMembers = allMembers.filter(m => m.status === currentMemberTab);
            
            if (filteredMembers.length === 0) {
                const messages = {
                    'pending': 'ÏäπÏù∏ ÎåÄÍ∏∞ Ï§ëÏù∏ ÌöåÏõêÏù¥ ÏóÜÏäµÎãàÎã§.',
                    'approved': 'ÏäπÏù∏Îêú ÌöåÏõêÏù¥ ÏóÜÏäµÎãàÎã§.',
                    'rejected': 'Í±∞Ï†àÎêú ÌöåÏõêÏù¥ ÏóÜÏäµÎãàÎã§.'
                };
                tbody.innerHTML = `<div class="table-empty">${messages[currentMemberTab]}</div>`;
                document.getElementById('member-pagination').innerHTML = '';
                return;
            }

            const start = (memberCurrentPage - 1) * membersPerPage;
            const end = start + membersPerPage;
            const pageMembers = filteredMembers.slice(start, end);

            tbody.innerHTML = '';
            pageMembers.forEach((member, index) => {
                const row = document.createElement('div');
                row.className = 'table-row';
                
                const date = member.createdAt ? new Date(member.createdAt).toLocaleDateString('ko-KR') : '-';
                
                // ÌöåÏõê Ïú†Ìòï ÌëúÏãú (ÏÉâÏÉÅÎßå Ïù∏ÎùºÏù∏ Ïä§ÌÉÄÏùº)
                let userTypeText = '-';
                let userTypeStyle = '';
                if (member.userType === 'employee') {
                    userTypeText = 'ÏûÑÏßÅÏõê';
                    userTypeStyle = 'color: #0071e3; font-weight: 600;';
                } else if (member.userType === 'general') {
                    userTypeText = 'ÏùºÎ∞òÌöåÏõê';
                    userTypeStyle = 'color: #44aa6b; font-weight: 600;';
                }
                
                // ÏäπÏù∏Ïó¨Î∂Ä ÌëúÏãú - Î≤ÑÌäºÎßå ÌëúÏãú (ÌÖçÏä§Ìä∏ Ï†úÍ±∞)
                let statusHtml = '';
                if (member.status === 'pending') {
                    // ÎåÄÍ∏∞ ÏÉÅÌÉú: ÏäπÏù∏Ïó¨Î∂Ä Ïª¨ÎüºÏóê Ï≤¥ÌÅ¨/X Î≤ÑÌäº ÌëúÏãú
                    statusHtml = `
                        <button class="approve-btn icon-btn" onclick="approveMember('${member.id}')" title="ÏäπÏù∏">‚úì</button>
                        <button class="reject-btn icon-btn" onclick="rejectMember('${member.id}')" title="Í±∞Ï†à">‚úó</button>
                    `;
                } else if (member.status === 'approved') {
                    // ÏäπÏù∏ ÏôÑÎ£å ÌÉ≠ÏóêÏÑúÎäî Ï≤¥ÌÅ¨ ÌëúÏãúÎßå ÌëúÏãú
                    if (currentMemberTab === 'approved') {
                        statusHtml = `<span style="color: #44aa6b; font-size: 20px; font-weight: bold;">‚úì</span>`;
                    } else {
                        statusHtml = '';
                    }
                } else if (member.status === 'rejected') {
                    // Í±∞Ï†à ÏÉÅÌÉú: ÏäπÏù∏Ïó¨Î∂Ä Ïª¨ÎüºÏóê Î≥µÍµ¨/ÏÇ≠Ï†ú Î≤ÑÌäº ÌëúÏãú
                    statusHtml = `
                        <button class="approve-btn icon-btn" onclick="approveMember('${member.id}')" title="Î≥µÍµ¨">‚úì</button>
                        <button class="reject-btn icon-btn" onclick="deleteMember('${member.id}')" title="">‚úó</button>
                    `;
                }
                
                // Í¥ÄÎ¶¨ Ïª¨ÎüºÏùÄ Îπà ÏÉÅÌÉúÎ°ú Ïú†ÏßÄ
                let actionButtons = '';

                // Î†àÏù¥ÏïÑÏõÉ Ïä§ÌÉÄÏùºÏùÄ CSSÏóê ÏúÑÏûÑ, ÏÉâÏÉÅ Îì± ÌëúÌòÑ Ïä§ÌÉÄÏùºÎßå Ïù∏ÎùºÏù∏
                // Î™®Î∞îÏùºÏóêÏÑúÎäî CSSÎ°ú ÏùºÎ∂Ä Ïª¨ÎüºÏù¥ Ïà®Í≤®Ïßê
                row.innerHTML = `
                    <span>${member.username || member.id}</span>
                    <span>${member.name || '-'}</span>
                    <span>${member.email || '-'}</span>
                    <span style="${userTypeStyle}">${userTypeText}</span>
                    <span>${date}</span>
                    <span>${statusHtml}</span>
                    <span>${actionButtons}</span>
                `;
                tbody.appendChild(row);
            });

            renderMemberPagination(filteredMembers.length);
        }

        // ÌöåÏõê ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò
        function renderMemberPagination(total) {
            const pagination = document.getElementById('member-pagination');
            if (!pagination) return;
            pagination.innerHTML = '';
            
            const totalPages = Math.ceil(total / membersPerPage);
            if (totalPages <= 1) return;

            for (let i = 1; i <= totalPages; i++) {
                const dot = document.createElement('span');
                dot.textContent = '‚óè';
                dot.className = 'pagination-dot' + (i === memberCurrentPage ? ' active' : '');
                dot.onclick = () => {
                    memberCurrentPage = i;
                    renderMembers();
                };
                pagination.appendChild(dot);
            }
        }

        // ÌöåÏõê ÏäπÏù∏
        async function approveMember(userId) {
            if (!confirm('Ïù¥ ÌöåÏõêÏùÑ ÏäπÏù∏ÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;
            try {
                await db.collection('users').doc(userId).update({ status: 'approved' });
                const member = allMembers.find(m => m.id === userId);
                if (member) member.status = 'approved';
                updatePendingCount();
                renderMembers();
                alert('ÌöåÏõêÏù¥ ÏäπÏù∏ÎêòÏóàÏäµÎãàÎã§.');
            } catch (error) {
                console.error('ÏäπÏù∏ Ïò§Î•ò:', error);
                alert('ÏäπÏù∏ Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
            }
        }

        // ÌöåÏõê Í±∞Ï†à
        async function rejectMember(userId) {
            if (!confirm('Ïù¥ ÌöåÏõêÏùÑ Í±∞Ï†à/ÌÉàÌá¥ Ï≤òÎ¶¨ÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;
            try {
                await db.collection('users').doc(userId).update({ status: 'rejected' });
                const member = allMembers.find(m => m.id === userId);
                if (member) member.status = 'rejected';
                updatePendingCount();
                renderMembers();
                alert('Ï≤òÎ¶¨ÎêòÏóàÏäµÎãàÎã§.');
            } catch (error) {
                console.error('Í±∞Ï†à Ïò§Î•ò:', error);
                alert('Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
            }
        }

        // ÌöåÏõê ÏÇ≠Ï†ú
        async function deleteMember(userId) {
            if (!confirm('Ïù¥ ÌöåÏõê Ï†ïÎ≥¥Î•º ÏôÑÏ†ÑÌûà ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?\nÏù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.')) return;
            try {
                await db.collection('users').doc(userId).delete();
                allMembers = allMembers.filter(m => m.id !== userId);
                updatePendingCount();
                renderMembers();
                alert('ÌöåÏõêÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');
            } catch (error) {
                console.error('ÏÇ≠Ï†ú Ïò§Î•ò:', error);
                alert('ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
            }
        }
    </script>

    <div class="partner-logos">
            <a href="https://www.g2b.go.kr/" target="_blank">
                <img src="../image/logo1.png" alt="ÌååÌä∏ÎÑà 1">
            </a>
            <a href="https://shop.g2b.go.kr/" target="_blank">
                <img src="../image/logo2.png" alt="ÌååÌä∏ÎÑà 2">
            </a>
            <a href="https://hometax.go.kr/" target="_blank">
                <img src="../image/logo3.png" alt="ÌååÌä∏ÎÑà 3">
            </a>
            <a href="https://www.smpp.go.kr" target="_blank">
                <img src="../image/logo4.png" alt="ÌååÌä∏ÎÑà 4">
            </a>
            <a href="https://ecosq.or.kr/" target="_blank">
                <img src="../image/logo5.png" alt="ÌååÌä∏ÎÑà 5">
            </a>
            <a href="https://www.sgic.co.kr/" target="_blank">
                <img src="../image/logo6.png" alt="ÌååÌä∏ÎÑà 6">
            </a>
            <a href="https://si4n.nhis.or.kr/" target="_blank">
                <img src="../image/logo7.png" alt="ÌååÌä∏ÎÑà 7">
            </a>
            <a href="https://www.4insure.or.kr/" target="_blank">
                <img src="../image/logo8.png" alt="ÌååÌä∏ÎÑà 8">
            </a>
    </div>

    <!-- Í≥ÑÏÇ∞Í∏∞ Î™®Îã¨ -->
    <div id="calculator-modal" class="tool-modal" style="display: none;">
        <div class="tool-modal-content calculator-content">
            <div class="tool-modal-header">
                <h3><img src="../image/calculator.png" alt="Í≥ÑÏÇ∞Í∏∞" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 8px;"> Í≥ÑÏÇ∞Í∏∞</h3>
                <button class="tool-modal-close" onclick="closeCalculator()">&times;</button>
            </div>
            <div class="calculator">
                <input type="text" id="calc-display" class="calc-display" readonly>
                <div class="calc-buttons">
                    <button onclick="clearCalc()" class="calc-btn calc-clear">C</button>
                    <button onclick="backspace()" class="calc-btn calc-clear">‚å´</button>
                    <button onclick="appendCalc('%')" class="calc-btn calc-operator">%</button>
                    <button onclick="appendCalc('/')" class="calc-btn calc-operator">√∑</button>
                    
                    <button onclick="appendCalc('7')" class="calc-btn">7</button>
                    <button onclick="appendCalc('8')" class="calc-btn">8</button>
                    <button onclick="appendCalc('9')" class="calc-btn">9</button>
                    <button onclick="appendCalc('*')" class="calc-btn calc-operator">√ó</button>
                    
                    <button onclick="appendCalc('4')" class="calc-btn">4</button>
                    <button onclick="appendCalc('5')" class="calc-btn">5</button>
                    <button onclick="appendCalc('6')" class="calc-btn">6</button>
                    <button onclick="appendCalc('-')" class="calc-btn calc-operator">‚àí</button>
                    
                    <button onclick="appendCalc('1')" class="calc-btn">1</button>
                    <button onclick="appendCalc('2')" class="calc-btn">2</button>
                    <button onclick="appendCalc('3')" class="calc-btn">3</button>
                    <button onclick="appendCalc('+')" class="calc-btn calc-operator">+</button>
                    
                    <button onclick="appendCalc('0')" class="calc-btn calc-zero">0</button>
                    <button onclick="appendCalc('.')" class="calc-btn">.</button>
                    <button onclick="calculate()" class="calc-btn calc-equals">=</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Í∑∏Î¶ºÌåê Î™®Îã¨ -->
    <div id="drawing-modal" class="tool-modal" style="display: none;">
        <div class="tool-modal-content drawing-content">
            <div class="tool-modal-header">
                <h3>üé® Í∑∏Î¶ºÌåê</h3>
                <button class="tool-modal-close" onclick="closeDrawingBoard()">&times;</button>
            </div>
            <div class="drawing-toolbar">
                <div class="tool-group">
                    <label>ÏÉâÏÉÅ:</label>
                    <input type="color" id="draw-color" value="#000000">
                </div>
                <div class="tool-group">
                    <label>ÍµµÍ∏∞:</label>
                    <input type="range" id="draw-size" min="1" max="50" value="5">
                    <span id="size-display">5px</span>
                </div>
                <div class="tool-group">
                    <button onclick="setDrawTool('pen')" class="draw-tool-btn active" id="pen-btn">‚úèÔ∏è Ìéú</button>
                    <button onclick="setDrawTool('eraser')" class="draw-tool-btn" id="eraser-btn">üßΩ ÏßÄÏö∞Í∞ú</button>
                </div>
                <div class="tool-group">
                    <button onclick="clearCanvas()" class="draw-action-btn">üóëÔ∏è Ï†ÑÏ≤¥ÏßÄÏö∞Í∏∞</button>
                    <button onclick="downloadCanvas()" class="draw-action-btn">üíæ Ï†ÄÏû•</button>
                </div>
            </div>
            <canvas id="drawing-canvas" width="800" height="500"></canvas>
        </div>
    </div>

    <style>
        /* ÎèÑÍµ¨ Î™®Îã¨ Í≥µÌÜµ Ïä§ÌÉÄÏùº */
        .tool-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.2s ease;
        }

        .tool-modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .tool-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            color: white;
        }

        .tool-modal-header h3 {
            margin: 0;
            font-size: 18px;
        }

        .tool-modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 24px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tool-modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* Í≥ÑÏÇ∞Í∏∞ Ïä§ÌÉÄÏùº */
        .calculator-content {
            width: 320px;
        }

        .calculator {
            padding: 20px;
        }

        .calc-display {
            width: 100%;
            padding: 16px;
            font-size: 28px;
            text-align: right;
            border: none;
            background: #1a1a2e;
            color: #00ff88;
            border-radius: 12px;
            margin-bottom: 16px;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .calc-btn {
            padding: 18px;
            font-size: 20px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: #e9ecef;
            color: #333;
            font-weight: 600;
        }

        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .calc-btn:active {
            transform: translateY(0);
        }

        .calc-operator {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .calc-clear {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
        }

        .calc-equals {
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            color: white;
        }

        .calc-zero {
            grid-column: span 2;
        }

        /* Í∑∏Î¶ºÌåê Ïä§ÌÉÄÏùº */
        .drawing-content {
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow: hidden;
        }

        .drawing-toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            padding: 16px 24px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            align-items: center;
        }

        .tool-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tool-group label {
            font-size: 14px;
            font-weight: 600;
            color: #495057;
        }

        #draw-color {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        #draw-size {
            width: 100px;
        }

        #size-display {
            font-size: 12px;
            color: #6c757d;
            min-width: 35px;
        }

        .draw-tool-btn, .draw-action-btn {
            padding: 8px 16px;
            border: 2px solid #e9ecef;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .draw-tool-btn:hover, .draw-action-btn:hover {
            border-color: #44aa6b;
            color: #44aa6b;
        }

        .draw-tool-btn.active {
            background: linear-gradient(135deg, #44aa6b 0%, #3a8f5a 100%);
            color: white;
            border-color: transparent;
        }

        .draw-action-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        #drawing-canvas {
            display: block;
            background: white;
            cursor: crosshair;
            width: 100%;
            height: auto;
        }

        @media (max-width: 768px) {
            .calculator-content {
                width: 90%;
                max-width: 320px;
            }
            
            /* Í≥ÑÏÇ∞Í∏∞ Î≤ÑÌäº ÎçîÎ∏îÌÉ≠ ÌôïÎåÄ Î∞©ÏßÄ */
            .calc-btn {
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }
            
            .calculator {
                touch-action: manipulation;
            }

            .drawing-content {
                width: 95%;
            }

            .drawing-toolbar {
                padding: 12px;
                gap: 10px;
            }

            .tool-group {
                flex-wrap: wrap;
            }
        }
    </style>

    <script>
        // Í≥ÑÏÇ∞Í∏∞ Í∏∞Îä•
        let calcDisplay = '';

        function openCalculator() {
            document.getElementById('calculator-modal').style.display = 'flex';
            calcDisplay = '';
            document.getElementById('calc-display').value = '0';
            
            // Î™®Î∞îÏùºÏóêÏÑú ÎçîÎ∏îÌÉ≠ ÌôïÎåÄ Î∞©ÏßÄ
            const viewport = document.querySelector('meta[name="viewport"]');
            if (viewport && window.innerWidth <= 768) {
                viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
            }
        }

        function closeCalculator() {
            document.getElementById('calculator-modal').style.display = 'none';
            
            // Î™®Î∞îÏùºÏóêÏÑú viewport Î≥µÏõê
            const viewport = document.querySelector('meta[name="viewport"]');
            if (viewport && window.innerWidth <= 768) {
                viewport.setAttribute('content', 'width=device-width, initial-scale=1.0');
            }
        }

        function appendCalc(value) {
            if (calcDisplay === '0' && value !== '.') {
                calcDisplay = value;
            } else {
                calcDisplay += value;
            }
            document.getElementById('calc-display').value = calcDisplay;
        }

        function clearCalc() {
            calcDisplay = '';
            document.getElementById('calc-display').value = '0';
        }

        function backspace() {
            calcDisplay = calcDisplay.slice(0, -1);
            document.getElementById('calc-display').value = calcDisplay || '0';
        }

        function calculate() {
            try {
                let expression = calcDisplay.replace(/%/g, '/100');
                let result = eval(expression);
                if (!isFinite(result)) {
                    document.getElementById('calc-display').value = 'Error';
                    calcDisplay = '';
                } else {
                    result = Math.round(result * 1000000000) / 1000000000;
                    document.getElementById('calc-display').value = result;
                    calcDisplay = result.toString();
                }
            } catch (e) {
                document.getElementById('calc-display').value = 'Error';
                calcDisplay = '';
            }
        }

        // ÌÇ§Î≥¥Îìú ÏûÖÎ†• ÏßÄÏõê
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('calculator-modal').style.display === 'flex') {
                if (e.key >= '0' && e.key <= '9') appendCalc(e.key);
                else if (e.key === '+' || e.key === '-' || e.key === '*' || e.key === '/') appendCalc(e.key);
                else if (e.key === '.') appendCalc('.');
                else if (e.key === 'Enter' || e.key === '=') calculate();
                else if (e.key === 'Escape') closeCalculator();
                else if (e.key === 'Backspace') backspace();
                else if (e.key === 'c' || e.key === 'C') clearCalc();
            }
        });

        // Í∑∏Î¶ºÌåê Í∏∞Îä•
        let canvas, ctx;
        let isDrawing = false;
        let currentTool = 'pen';
        let lastX = 0;
        let lastY = 0;

        function openDrawingBoard() {
            document.getElementById('drawing-modal').style.display = 'flex';
            initCanvas();
        }

        function closeDrawingBoard() {
            document.getElementById('drawing-modal').style.display = 'none';
        }

        function initCanvas() {
            canvas = document.getElementById('drawing-canvas');
            ctx = canvas.getContext('2d');
            
            // Ï∫îÎ≤ÑÏä§ ÌÅ¨Í∏∞ Ï°∞Ï†ï (Í≥†Ï†ï ÌÅ¨Í∏∞Î°ú ÏÑ§Ï†ïÌïòÏó¨ Ï¢åÌëú Ï†ïÌôïÎèÑ Ìñ•ÏÉÅ)
            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();
            const maxWidth = Math.min(800, rect.width - 48);
            
            // Ï∫îÎ≤ÑÏä§ Ïã§Ï†ú ÌîΩÏÖÄ ÌÅ¨Í∏∞ ÏÑ§Ï†ï
            canvas.width = maxWidth;
            canvas.height = 500;
            
            // CSSÎ°ú ÌëúÏãú ÌÅ¨Í∏∞ ÏÑ§Ï†ï (Ïã§Ï†ú ÌÅ¨Í∏∞ÏôÄ ÎèôÏùºÌïòÍ≤å)
            canvas.style.width = maxWidth + 'px';
            canvas.style.height = '500px';
            
            // Ìù∞ÏÉâ Î∞∞Í≤Ω
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà (Ï§ëÎ≥µ Î∞©ÏßÄ)
            canvas.removeEventListener('mousedown', startDrawing);
            canvas.removeEventListener('mousemove', draw);
            canvas.removeEventListener('mouseup', stopDrawing);
            canvas.removeEventListener('mouseout', stopDrawing);
            canvas.removeEventListener('touchstart', handleTouchStart);
            canvas.removeEventListener('touchmove', handleTouchMove);
            canvas.removeEventListener('touchend', stopDrawing);
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            // ÌÑ∞Ïπò ÏßÄÏõê
            canvas.addEventListener('touchstart', handleTouchStart);
            canvas.addEventListener('touchmove', handleTouchMove);
            canvas.addEventListener('touchend', stopDrawing);

            // ÍµµÍ∏∞ ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
            const sizeInput = document.getElementById('draw-size');
            if (sizeInput) {
                sizeInput.removeEventListener('input', updateSizeDisplay);
                sizeInput.addEventListener('input', updateSizeDisplay);
            }
        }
        
        function updateSizeDisplay() {
            document.getElementById('size-display').textContent = this.value + 'px';
        }

        // Ï∫îÎ≤ÑÏä§ Ï¢åÌëú Î≥ÄÌôò Ìï®Ïàò (ÌëúÏãú ÌÅ¨Í∏∞ÏôÄ Ïã§Ï†ú ÌÅ¨Í∏∞ ÎπÑÏú® Í≥ÑÏÇ∞)
        function getCanvasCoordinates(e) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            return {
                x: (e.clientX - rect.left) * scaleX,
                y: (e.clientY - rect.top) * scaleY
            };
        }

        function startDrawing(e) {
            isDrawing = true;
            const coords = getCanvasCoordinates(e);
            lastX = coords.x;
            lastY = coords.y;
        }

        function draw(e) {
            if (!isDrawing) return;

            const coords = getCanvasCoordinates(e);
            const x = coords.x;
            const y = coords.y;

            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(x, y);
            
            if (currentTool === 'pen') {
                ctx.strokeStyle = document.getElementById('draw-color').value;
                ctx.globalCompositeOperation = 'source-over';
            } else {
                ctx.strokeStyle = 'white';
                ctx.globalCompositeOperation = 'source-over';
            }
            
            ctx.lineWidth = document.getElementById('draw-size').value;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.stroke();

            lastX = x;
            lastY = y;
        }

        function stopDrawing() {
            isDrawing = false;
        }

        // ÌÑ∞Ïπò Ï¢åÌëú Î≥ÄÌôò Ìï®Ïàò
        function getCanvasTouchCoordinates(touch) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            return {
                x: (touch.clientX - rect.left) * scaleX,
                y: (touch.clientY - rect.top) * scaleY
            };
        }

        function handleTouchStart(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const coords = getCanvasTouchCoordinates(touch);
            lastX = coords.x;
            lastY = coords.y;
            isDrawing = true;
        }

        function handleTouchMove(e) {
            e.preventDefault();
            if (!isDrawing) return;

            const touch = e.touches[0];
            const coords = getCanvasTouchCoordinates(touch);
            const x = coords.x;
            const y = coords.y;

            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(x, y);
            
            if (currentTool === 'pen') {
                ctx.strokeStyle = document.getElementById('draw-color').value;
            } else {
                ctx.strokeStyle = 'white';
            }
            
            ctx.lineWidth = document.getElementById('draw-size').value;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.stroke();

            lastX = x;
            lastY = y;
        }

        function setDrawTool(tool) {
            currentTool = tool;
            document.getElementById('pen-btn').classList.remove('active');
            document.getElementById('eraser-btn').classList.remove('active');
            document.getElementById(tool + '-btn').classList.add('active');
        }

        function clearCanvas() {
            if (confirm('Í∑∏Î¶ºÏùÑ Î™®Îëê ÏßÄÏö∞ÏãúÍ≤†ÏäµÎãàÍπå?')) {
                ctx.fillStyle = 'white';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }
        }

        function downloadCanvas() {
            const link = document.createElement('a');
            link.download = 'Í∑∏Î¶º_' + new Date().toISOString().slice(0, 10) + '.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
        document.getElementById('calculator-modal').addEventListener('click', function(e) {
            if (e.target === this) closeCalculator();
        });

        document.getElementById('drawing-modal').addEventListener('click', function(e) {
            if (e.target === this) closeDrawingBoard();
        });
    </script>

    <div style="padding: 15px 20px 5px 20px; font-size: 10px; color: #bcbcbc; text-align: left; line-height: 1.6; word-break: break-word; overflow-wrap: break-word;">
      <p style="text-indent: 20px; margin: 12px 0 !important; line-height: 1.8 !important; word-break: break-word; overflow-wrap: break-word; white-space: normal;">1. Î≥∏ ÌôàÌéòÏù¥ÏßÄÎäî Îç∞Ïä§ÌÅ¨ÌÉë Î∏åÎùºÏö∞Ï†Ä Î≤ÑÏ†ÑÏóê ÏµúÏ†ÅÌôî ÎêòÏñ¥ÏûàÏäµÎãàÎã§. ÏõêÌôúÌïú ÏÇ¨Ïö©ÏùÑ ÏúÑÌï¥ Îç∞Ïä§ÌÅ¨ÌÉë Î∏åÎùºÏö∞Ï†Ä ÌôòÍ≤ΩÏúºÎ°ú ÏÇ¨Ïö©Ìï¥Ï£ºÏÑ∏Ïöî.</p>
      <p style="text-indent: 20px; margin: 12px 0 !important; line-height: 1.8 !important; word-break: break-word; overflow-wrap: break-word; white-space: normal;">2. ÌïòÎÇòÎ°úÏò§ÏóêÏù¥ÌçºÎãàÏ≤òÎäî Ï°∞Îã¨Ï≤≠ Î∞è Í≥µÍ≥µÍ∏∞Í¥Ä ÎÇ©Ìíà Ï†ÑÏö© Í∞ÄÍµ¨Î•º Ï†ÑÎ¨∏ÏúºÎ°ú Ï†úÏûëÌïòÎäî Í∏∞ÏóÖ ÏûÖÎãàÎã§. Î≥∏ ÌôàÌéòÏù¥ÏßÄÏóêÏÑú ÏÜåÍ∞úÎêòÎäî Ï†úÌíàÎì§ÏùÄ Ï°∞Îã¨Ï≤≠ Ï¢ÖÌï©ÏáºÌïëÎ™∞ ÌåêÎß§ Ï†ÑÏö©ÏûÖÎãàÎã§.</p>
    </div>
        
    <footer>
        <p>Copyright ¬© 2025 (Ï£º)ÌïòÎÇòÎ°úÏò§ÏóêÏù¥ÌçºÎãàÏ≤ò. Î™®Îì† Í∂åÎ¶¨ Î≥¥Ïú†. | Î¨∏Ïùò : oa9500@empas.com | Ï†ÑÌôî : 042-633-9500  |  A/S : 043-731-9511</p>
        <p class="footer-info">Ï£ºÏãùÌöåÏÇ¨ ÌïòÎÇòÎ°úÏò§ÏóêÏù¥ÌçºÎãàÏ≤ò | ÎåÄÌëúÏù¥ÏÇ¨ : Ï†ïÏßÑÌù¨, Ïû•Ïù∏Îçï | Ï£ºÏÜå : ÎåÄÏ†ÑÍ¥ëÏó≠Ïãú ÎåÄÎçïÍµ¨ Ïò§Ï†ïÎ°ú 41Î≤àÍ∏∏ 12 | Ï†ÑÌôî : 042-633-9500 | ÏÇ¨ÏóÖÏûêÎì±Î°ùÎ≤àÌò∏ : 305-81-45158</p>
    </footer>
</body>
</html>
